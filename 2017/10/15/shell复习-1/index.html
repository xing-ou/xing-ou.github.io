<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>shell复习-1 | lyyourc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2017/10/15/shell复习-1/">shell复习-1</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">October 15 2017</p>
  </section>

  <section class="article-entry">
    <h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 等会前后不能有空格，以字母或下划线开头</div><div class="line">file=123456</div><div class="line"><span class="meta">#</span>如果值中有空格，用引号包裹起来</div><div class="line">file="1 2 3 4 5 6"</div><div class="line"><span class="meta">#</span>取值用$</div><div class="line">echo $file</div></pre></td></tr></table></figure>
<h4 id="输出命令"><a href="#输出命令" class="headerlink" title="输出命令"></a>输出命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo "hellowrorld"</div><div class="line">printf "hello %d world %s" 123 "string"</div></pre></td></tr></table></figure>
<h4 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">字符转换命令</div><div class="line"><span class="meta">#</span>将string1中的字符替换为string2中的字符，要替换的字符每个对应</div><div class="line">tr  string1 string2 </div><div class="line"><span class="meta">#</span>删除所有属于第一字符集的字符</div><div class="line">tr  -d string1</div><div class="line"><span class="meta">#</span>把连续重复的字符以单独一个字符表示 </div><div class="line">tr  -s string1</div></pre></td></tr></table></figure>
<h4 id="shell脚本的参数"><a href="#shell脚本的参数" class="headerlink" title="shell脚本的参数"></a>shell脚本的参数</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./my.sh arg1  arg2  arg3</div><div class="line"><span class="meta">$</span>0      $1    $2     $3</div></pre></td></tr></table></figure>
<h4 id="查找与替换"><a href="#查找与替换" class="headerlink" title="查找与替换"></a>查找与替换</h4><h5 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">解析输入，找到符合某个正则的行</div><div class="line">grep用于简单匹配，使用基本正则(BRE)</div><div class="line">egrep 使用扩展正则(ERE)</div><div class="line">-A  n ：额外显示匹配行后面的n行。</div><div class="line">-B  n :显示匹配的行和之前的n行</div><div class="line">-C n：等价于-A N -B n,显示之前和之后的n行</div><div class="line">-c :打印匹配的个数</div><div class="line">-E 使用扩展正则，等价于egrep</div><div class="line">-e 表达式 ：指定匹配的东西,当有多个表达式时很有用</div><div class="line">-i:忽略大小写</div><div class="line">-v:反转</div><div class="line">-n:显示行号</div><div class="line">-l:显示匹配的文件的名称，而不是行,-L取反</div><div class="line">-d:指定查找的是目录而非文件</div><div class="line">-r:递归目录查找</div><div class="line">--exclude:忽略某些文件(--exclude *.&#123;php,html&#125;)</div><div class="line">--exclude-dir:忽略某些文件夹</div><div class="line">--include ：只在某些文件中搜索</div><div class="line">--include-dir：</div><div class="line">注意BRE和ERE有些区别。</div></pre></td></tr></table></figure>
<h5 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span>s命令:替换</div><div class="line">sed 's/hello/world/' 将第一个hello替换为world</div><div class="line">sed 's/hello/world/g' 将所有的hello替换为world</div><div class="line">sed 's/hello/world/3' 将第三个hello替换为world</div><div class="line">sed 's/hello/world/2g' 从第二个hello开始所有hello替换为world</div><div class="line"><span class="meta">#</span>定界符,可自定义，如果替换中有，那么需要转义</div><div class="line">sed 's:hello:world:g'</div><div class="line"><span class="meta">#</span>d命令：删除操作</div><div class="line">sed '/^hello/d' 删除以hello开头的行</div><div class="line">sed '2d'删除第二行</div><div class="line">sed '2,5d' 删除2-5行</div><div class="line">sed '2,$d' 删除2到最后一行</div><div class="line"><span class="meta">#</span>已匹配字符串标记&amp;</div><div class="line">sed 's/hello/&amp;world/g' 将hello替换为helloworld</div><div class="line"><span class="meta">#</span>选定行的范围：,（逗号）</div><div class="line">sed -n '/test/,/check/p'</div><div class="line">注意sed的正则是BRE。</div></pre></td></tr></table></figure>
<h4 id="cut命令"><a href="#cut命令" class="headerlink" title="cut命令"></a>cut命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">做子串提取，获取域分割</div><div class="line">-d: 指定分割符</div><div class="line">-f：显示指定字段的内容</div><div class="line">echo "field1:field2:field3" | cut -d : -f 2 </div><div class="line">输出:field2</div><div class="line">-c </div><div class="line">echo "field1:field2:field3" | cut -c3-7 剪切3-7的子串</div></pre></td></tr></table></figure>
<h4 id="awk命令"><a href="#awk命令" class="headerlink" title="awk命令"></a>awk命令</h4><h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">awk [options] 'script' var=value file(s) </div><div class="line">awk [options] -f scriptfile var=value file(s)</div></pre></td></tr></table></figure>
<h6 id="常用命令选项"><a href="#常用命令选项" class="headerlink" title="常用命令选项"></a>常用命令选项</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-F fs：指定分割符</div><div class="line">-v var=value ：赋值一个用户定义变量，将外部变量传递给awk。</div><div class="line">-f filescript： 从文件中读取awk命令</div></pre></td></tr></table></figure>
<h6 id="awk基本结构"><a href="#awk基本结构" class="headerlink" title="awk基本结构"></a>awk基本结构</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">awk 'BEGIN&#123; print "start" &#125; pattern&#123; commands &#125; END&#123; print "end" &#125;' file</div><div class="line">先自行BEGIN语句块，读取一行执行pattern&#123;commands&#125;，到文件末尾执行END&#123;&#125;。</div><div class="line"></div><div class="line"></div><div class="line">print 在awk中：</div><div class="line">print a,b,c  输出是以空格分割，可以用""连接多个变量。</div></pre></td></tr></table></figure>
<h6 id="awk的内置变量"><a href="#awk的内置变量" class="headerlink" title="awk的内置变量"></a>awk的内置变量</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span>0 整行</div><div class="line"><span class="meta">$</span>1,$2...第n个field</div><div class="line">FILENAME ：输入文件的名称</div><div class="line">FS：分割符</div><div class="line">NF：总的字段数</div><div class="line">NR: 当前的行号</div></pre></td></tr></table></figure>
<h6 id="参数传递-v选项"><a href="#参数传递-v选项" class="headerlink" title="参数传递-v选项"></a>参数传递-v选项</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">echo "hello world" | awk -v name='happy new year' '&#123; print name &#125;'</div><div class="line">或者不加-v，放在末尾</div><div class="line">echo "hello world" | awk  '&#123; print name &#125;END&#123;print aa&#125;' aa='helloworld' name='hapy new year'</div></pre></td></tr></table></figure>
<h6 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">基本上的c运算符都支持。</div><div class="line">特殊的:</div><div class="line">^ 求幂 2^3  = 8</div><div class="line">~ 正则匹配</div><div class="line">~!正则不匹配</div><div class="line">in 判断数组是否含有某个key:arry["a"]=123;if( "a" in arry )&#123;xxx&#125;</div></pre></td></tr></table></figure>
<h6 id="高级输入输出"><a href="#高级输入输出" class="headerlink" title="高级输入输出"></a>高级输入输出</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">next</div><div class="line">next直接进行下一次匹配</div><div class="line"></div><div class="line"></div><div class="line">getline函数  </div><div class="line">如果左右有重定向符"|"，"&lt;",那么表示从重定向的文件中获取输入行。</div><div class="line">express|getline var  从express命令的结果中获取一行赋值给var。</div><div class="line">awk 'BEGIN&#123;while("ls"|getline var)&#123; print var &#125;&#125;'</div><div class="line">如果没有的话，那就是从当前文件中读取，会造成隔行读取。</div><div class="line">awk '&#123;getline var;print var&#125;'只会打印偶数行。</div><div class="line"></div><div class="line">close函数</div><div class="line">关闭文件(getline可以打开文件)</div><div class="line">允许重定向符的使用</div><div class="line"><span class="meta">&gt;</span> 和&gt;&gt;</div></pre></td></tr></table></figure>
<h6 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">基本和C一样</div><div class="line">for支持for(key in array)</div></pre></td></tr></table></figure>
<h6 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">awk的数组类似一个字典。Index可以是任意值。</div><div class="line">arry["key1"]="value1"</div><div class="line">arry["key2"]="value1"</div><div class="line">arry[3]="value1"</div><div class="line"></div><div class="line">相关函数:</div><div class="line">length()</div><div class="line">awk '&#123;line[NR]=$0&#125;END&#123;print length(line)&#125;' aa.sh</div><div class="line">多维数组</div><div class="line">array[1,2]=12</div></pre></td></tr></table></figure>
<h6 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">算术函数：</div><div class="line">log()</div><div class="line">sin()</div><div class="line">cos()</div><div class="line">...</div><div class="line">rand()返回任意数字 n，其中 0 &lt;= n &lt; 1。</div><div class="line"></div><div class="line"></div><div class="line">字符串函数</div><div class="line"><span class="meta">#</span>字符串替换</div><div class="line">sub( Ere, Repl, [ In ] )</div><div class="line">in:如果不指定，默认$0，将in中第一个匹配ERE的字符串替换为Repl</div><div class="line">gsub( Ere, Repl, [ In ] ) 不是替换第一个，而是替换所有</div><div class="line">cat data.txt|awk '&#123;gsub(2,100,$0);print $0&#125;'将所有的</div><div class="line"><span class="meta">#</span>字符串查找</div><div class="line">index(string1,string2) string1是否包含string2,返回起始位置</div><div class="line"><span class="meta">#</span>字符串正则匹配查找</div><div class="line">match(string,ERE)</div><div class="line"><span class="meta">#</span>字符串长度</div><div class="line">length(string)</div><div class="line"><span class="meta">#</span>字符串截取</div><div class="line">substr(string,开始位置,长度)</div><div class="line"><span class="meta">#</span>字符串分割</div><div class="line">split( String, A, [Ere] )将字符串str以ERE匹配的作为分隔符，分割的结果放到数组A中</div><div class="line"><span class="meta">#</span>格式化</div><div class="line">toupper(string)</div><div class="line">tolower(strong)</div><div class="line">sprintf("",arg1,arg2...)</div><div class="line"></div><div class="line"></div><div class="line">一般函数：</div><div class="line">system()：执行shell命令，返回退出状态</div></pre></td></tr></table></figure>

  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="http://7xrcp8.com1.z0.glb.clouddn.com/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> lyyourc </p>
      <p class="subtitle"> You Are The JavaScript In My HTML </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="变量"><a href="#变"
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'http://yoursite.com/2017/10/15/shell复习-1/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
