<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>façš„å­¦ä¹ ä¹‹è·¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ä¹‹å‰çš„blogåœ¨æ¢ç”µè„‘æ—¶ä¸¢å¤±äº†,æ²¡åŠæ³•å¦èµ·ä¸€ä¸ª">
<meta property="og:type" content="website">
<meta property="og:title" content="façš„å­¦ä¹ ä¹‹è·¯">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="façš„å­¦ä¹ ä¹‹è·¯">
<meta property="og:description" content="ä¹‹å‰çš„blogåœ¨æ¢ç”µè„‘æ—¶ä¸¢å¤±äº†,æ²¡åŠæ³•å¦èµ·ä¸€ä¸ª">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="façš„å­¦ä¹ ä¹‹è·¯">
<meta name="twitter:description" content="ä¹‹å‰çš„blogåœ¨æ¢ç”µè„‘æ—¶ä¸¢å¤±äº†,æ²¡åŠæ³•å¦èµ·ä¸€ä¸ª">
  
    <link rel="alternative" href="/atom.xml" title="façš„å­¦ä¹ ä¹‹è·¯" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.b3331d.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="http://xingou.oss-cn-shanghai.aliyuncs.com/webwxgeticon.jpeg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">gouxin</a></h1>
		</hgroup>
		
		<p class="header-subtitle">gogogo</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/tags/éšç¬”/">éšç¬”</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">å‹é“¾</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://xingou.oss-cn-shanghai.aliyuncs.com/webwxgeticon.jpeg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">gouxin</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>gogogo<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">ä¸»é¡µ</a></li>
		        
					<li style="width: 50%"><a href="/tags/éšç¬”/">éšç¬”</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-swiftä¹‹ARC" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/07/swiftä¹‹ARC/">swiftä¹‹ARC</a>
    </h1>
  

        
        <a href="/2018/08/07/swiftä¹‹ARC/" class="archive-article-date">
  	<time datetime="2018-08-07T07:16:58.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-08-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="swiftçš„ARC"><a href="#swiftçš„ARC" class="headerlink" title="swiftçš„ARC"></a>swiftçš„ARC</h2><p>åœ¨swiftä¸­ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨æ¦‚å¿µä¸Šæœ‰ä¸‰ç§refcountã€‚strongå’Œunownedå­˜åœ¨inlinerefå­—æ®µä¸­ï¼Œweakå­˜åœ¨sidetableçš„refcountä¸­ã€‚</p>
<ul>
<li>Strong RC : è®°å½•è¿™ä¸ªå¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å½“å¼ºå¼•ç”¨ä¸º0æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«deinitedã€‚æ­¤æ—¶è¯»å–unowned referenceä¼šå‡ºé”™ï¼Œè¯»å–weak referenceä¼šå¾—åˆ°nilã€‚Strong RCæ˜¯é€šè¿‡é¢å¤–å¼•ç”¨è®¡æ•°extraè®°å½•çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œextraä¸º0ï¼Œä»£è¡¨å®é™…çš„å¼•ç”¨è®¡æ•°ä¸º1ã€‚</li>
<li>Unowned RC: è®°å½•å¯¹è±¡çš„æ— ä¸»å¼•ç”¨ã€‚æ— ä¸»å¼•ç”¨åˆå§‹åŒ–ä¸º1ã€‚åœ¨deiniteå®Œæˆå-1ï¼Œå½“æ— ä¸»å¼•ç”¨ä¸º0æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡åˆ†é…çš„å†…å­˜ä¼šè¢«freeæ‰ã€‚</li>
<li>weak RC: è®°å½•è¿™ä¸ªå¯¹è±¡çš„å¼±å¼•ç”¨ã€‚å¼±å¼•åˆå§‹åŒ–ä¹Ÿä¸º1ï¼Œåœ¨åˆ†é…çš„å†…å­˜freeæ‰å-1ã€‚å½“å¼±å¼•ç”¨ä¸º0ï¼Œè¿™ä¸ªå¯¹è±¡çš„side table entryä¼šè¢«é‡Šæ”¾æ‰ã€‚</li>
</ul>
<p>å¯¹è±¡åˆå§‹åŒ–æ—¶æ˜¯æ²¡æœ‰side tableçš„ã€‚åœ¨ä¸‹é¢æƒ…å†µä¸‹ä¼šç”Ÿæˆï¼š</p>
<ul>
<li>æœ‰å¼±å¼•ç”¨</li>
<li>strong RCæˆ–è€…unowned RCè®¡æ•°æº¢å‡ºäº†</li>
<li>æœ‰associated object</li>
<li>ç­‰</li>
</ul>
<p>å¼ºå¼•ç”¨å’Œæ— ä¸»å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚</p>
<p>å¼±å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„side table(å£°æ˜ä¸€ä¸ªweakå˜é‡ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªWeakRefrenceå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šæŒæœ‰ä¸€ä¸ªWeakReferenceBits, WeakReferenceBitsæ˜¯é€šè¿‡sidetableentryåˆå§‹åŒ–çš„ï¼ŒsidetableentryåŒ…å«äº†å¼•ç”¨å¯¹è±¡çš„æŒ‡é’ˆå’Œå¼•ç”¨è®¡æ•°ï¼Œæ‰€ä»¥å½“strongRCä¸º0æ—¶ï¼Œå¯¹è±¡å¯ä»¥é€šè¿‡HeapObjectçš„refæ‰¾åˆ°sidetableentryï¼Œå¹¶æŠŠå…¶ä¸­çš„å¯¹è±¡æŒ‡é’ˆè®¾ç½®ä¸ºnilï¼Œè¿™æ ·å¼±å¼•ç”¨è®¿é—®æ‹¿åˆ°çš„éƒ½æ˜¯nil)ã€‚</p>
<p>swiftä¸­æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªHeapObjectã€‚ä¸‹é¢æ˜¯ä»–çš„å®šä¹‰ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">struct HeapObject &#123;</div><div class="line">  /// This is always a valid pointer to a metadata object.</div><div class="line">  HeapMetadata const *metadata;//ç­‰ä»·äºisa</div><div class="line"></div><div class="line">  InlineRefCounts refCounts;//è®°å½•å¼•ç”¨è®¡æ•°ï¼Œå¹¶æä¾›äº†æ“ä½œå¼•ç”¨è®¡æ•°çš„æ–¹æ³•</div><div class="line"></div><div class="line">#ifdef __cplusplus</div><div class="line">  HeapObject() = default;</div><div class="line"></div><div class="line">  // Initialize a HeapObject header as appropriate for a newly-allocated object.</div><div class="line">  constexpr HeapObject(HeapMetadata const *newMetadata) </div><div class="line">    : metadata(newMetadata)</div><div class="line">    , refCounts(InlineRefCounts::Initialized)</div><div class="line">  &#123; &#125;</div><div class="line"></div><div class="line">#ifndef NDEBUG</div><div class="line">  void dump() const LLVM_ATTRIBUTE_USED;</div><div class="line">#endif</div><div class="line"></div><div class="line">#endif // __cplusplus</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">  HeapObject &#123;</div><div class="line">    isa</div><div class="line">    InlineRefCounts &#123;</div><div class="line">      atomic&lt;InlineRefCountBits&gt; &#123;</div><div class="line">        strong RC + unowned RC + flags</div><div class="line">        OR</div><div class="line">        HeapObjectSideTableEntry*</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  HeapObjectSideTableEntry &#123;</div><div class="line">    SideTableRefCounts &#123;</div><div class="line">      object pointer</div><div class="line">      atomic&lt;SideTableRefCountBits&gt; &#123;</div><div class="line">        strong RC + unowned RC + weak RC + flags</div><div class="line">      &#125;</div><div class="line">    &#125;   </div><div class="line">  &#125;</div><div class="line">æ€»çš„æ¥è¯´å°±æ˜¯ï¼šInlineRefCountsä¼šå°è¯•è‡ªå·±å¤„ç†å¼•ç”¨è®¡æ•°ï¼Œå¦‚æœæœ‰side tableäº†ï¼Œé‚£ä¹ˆä¼šè°ƒHeapObjectSideTableEntry çš„ç›¸å…³æ–¹æ³•ï¼ŒHeapObjectSideTableEntryåˆè°ƒç”¨SideTableRefCounts çš„ç›¸å…³æ–¹æ³•ã€‚</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeakReference</span> &#123;</span></div><div class="line">  <span class="keyword">union</span> &#123;</div><div class="line">    <span class="built_in">std</span>::atomic&lt;WeakReferenceBits&gt; nativeValue;</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> SWIFT_OBJC_INTEROP</span></div><div class="line">    id nonnativeValue;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">  &#125;;</div><div class="line">   <span class="function"><span class="keyword">void</span> <span class="title">nativeInit</span><span class="params">(HeapObject *object)</span> </span>&#123;</div><div class="line">    <span class="comment">//åˆå§‹åŒ–æ—¶é€šè¿‡refCountç”Ÿæˆsidetableï¼Œå¹¶æ›´æ”¹refCountçš„bitä¸ºsidetableçš„æŒ‡é’ˆ+flag  </span></div><div class="line">    <span class="keyword">auto</span> side = object ? object-&gt;refCounts.formWeakReference() : <span class="literal">nullptr</span>;</div><div class="line">    nativeValue.store(WeakReferenceBits(side), <span class="built_in">std</span>::memory_order_relaxed);</div><div class="line">  &#125;</div><div class="line">    ....</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeakReferenceBits</span> &#123;</span></div><div class="line">  <span class="keyword">uintptr_t</span> bits;</div><div class="line">    ....</div><div class="line">  WeakReferenceBits(HeapObjectSideTableEntry *newValue) &#123;</div><div class="line">    setNativeOrNull(newValue);</div><div class="line">  &#125;</div><div class="line">    .....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº"><a href="#å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº" class="headerlink" title="å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº"></a>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº</h3><ul>
<li><p><code>Live</code> (æ²¡æœ‰side table):</p>
<p>å¯¹è±¡çš„refcountsè¢«åˆå§‹åŒ–ä¸ºï¼šstrong 1ï¼Œ unowned 1 ,weak 1ã€‚</p>
<p>Strong varibaleæ­£å¸¸å·¥ä½œã€‚</p>
<p>unowned variableæ­£å¸¸å·¥ä½œã€‚</p>
<p>æ²¡æœ‰weak variableã€‚</p>
<p>å¦‚æœä½ å£°æ˜äº†ä¸€ä¸ªweak variableï¼Œé‚£ä¹ˆä¼šæ·»åŠ side tableï¼Œå¯¹è±¡å˜æˆLive with side tableçŠ¶æ€ã€‚</p>
<p>å½“strong RCå˜ä¸º0äº†ï¼Œä¼šè°ƒç”¨deinit()ï¼Œç„¶åå¯¹è±¡çŠ¶æ€å˜ä¸º<code>DEINITING</code>ã€‚</p>
</li>
<li><p><code>Live</code>(æœ‰side table)</p>
<p>weak variableæ­£å¸¸å·¥ä½œã€‚</p>
<p>å…¶ä»–çš„å’ŒLiveç›¸åŒã€‚</p>
</li>
<li><p><code>DEINITING</code>(æ²¡æœ‰side table)</p>
<p>deinit()æ­£åœ¨è¿›è¡Œã€‚</p>
<p>å¼ºå¼•ç”¨å˜é‡å°†ä¸èƒ½ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨unowned variableä¼šå¼•å‘swift_abortRetainUnowned() é”™è¯¯ã€‚</p>
<p>unowned variableçš„èµ‹å€¼æ­£å¸¸å·¥ä½œã€‚</p>
<p>weak  variable ä¸èƒ½ä½¿ç”¨ã€‚(å› ä¸ºæ²¡æœ‰side tableå°±æ²¡æœ‰å¼±å¼•ç”¨ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨ä½¿ç”¨å¼±å¼•ç”¨å˜é‡)ã€‚</p>
<p>weak  variableçš„èµ‹å€¼ä¼šå­˜ä¸ºnilã€‚</p>
<p>å½“deinit()å®Œæˆå,ä¼šè°ƒç”¨swift_deallocObject ã€‚swift_deallocObject ä¼šè°ƒç”¨canBeFreedNow() æ¥æ£€æŸ¥è¿˜æœ‰æ²¡æœ‰weakæˆ–è€…unowned referencesã€‚å¦‚æœcanBeFreedNowè¿”å›yesï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡è¢«freeæ‰ï¼Œå¯¹è±¡å˜ä¸º<code>DEAD</code>ï¼Œå¦åˆ™ï¼Œå°†å‡å°‘æ— ä¸»å¼•ç”¨ï¼Œå¯¹è±¡å˜ä¸º<code>DEINITED</code>çŠ¶æ€ã€‚</p>
</li>
<li><p><code>DEINITING</code>æœ‰side table</p>
<p>weak varibaleä¸ºnilã€‚canBeFreedNow ä¼šä¸€ç›´è¿”å›falseï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸å¯èƒ½ç›´æ¥å˜ä¸ºDEADã€‚</p>
<p>å…¶ä»–åŒä¸Šã€‚</p>
</li>
<li><p><code>DEINITED</code>æ²¡æœ‰side tableã€‚</p>
<p>deinit()å®Œæˆäº†ï¼Œä¸è¿‡æ— ä¸»å¼•ç”¨unowned referencesè¿˜å­˜åœ¨ã€‚</p>
<p>Strong variableçš„æ“ä½œ(storeå’Œload)ä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>Unowned varibaleçš„storeä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>Unowned varibaleçš„loadä¼šæŠ¥swift_abortRetainUnowned() ã€‚</p>
<p>weak variableçš„æ“ä½œä¸èƒ½æ‰§è¡Œã€‚</p>
<p>å¦‚æœunowned RCä¸º0äº†ï¼Œå¯¹è±¡ä¼šè¢«freeæ‰ï¼Œç„¶åå˜ä¸º<code>DEAD</code></p>
</li>
<li><p><code>DEINITED</code>æœ‰side tableã€‚</p>
<p>weak variableçš„loadä¼šè¿”å›nilã€‚</p>
<p>Weak variableçš„storeä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>å½“unowned RCä¸º0æ—¶ï¼Œå¯¹è±¡è¢«freeæ‰ã€‚å‡å°‘weak RC, å¯¹è±¡å˜ä¸ºFREEDã€‚</p>
<p>å…¶ä»–çš„åŒä¸Šã€‚</p>
</li>
<li><p><code>FREED</code>æ²¡æœ‰side table</p>
<p>ä¸å¯èƒ½å‘ç”Ÿï¼Œå› ä¸ºFREEDéœ€è¦weak RC, æœ‰weak RCå°±ä¸€å®šæœ‰side tableã€‚</p>
</li>
<li><p><code>FREED</code>æœ‰side tableã€‚</p>
<p>å¯¹è±¡è™½ç„¶freeäº†ï¼Œä½†æ˜¯æŒ‡å‘side tableçš„weak referencesè¿˜å­˜åœ¨ã€‚</p>
<p>strong variableçš„æ“ä½œä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>unowned variableçš„æ“ä½œä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>weak variableçš„loadä¼šè¿”å›nilã€‚</p>
<p>Weak variableçš„storeä¸å¯èƒ½å‘ç”Ÿã€‚</p>
<p>å½“weak RCä¸º0æ—¶ï¼Œside table entryä¼šfreeæ‰ï¼Œå¯¹è±¡å˜ä¸º<code>DEAD</code></p>
</li>
<li><p><code>DEAD</code></p>
<p>å¯¹è±¡å’Œä»–çš„side tableéƒ½é‡Šæ”¾äº†ã€‚</p>
</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">swift</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/08/07/swiftä¹‹ARC/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-test" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/07/test/">test</a>
    </h1>
  

        
        <a href="/2018/08/07/test/" class="archive-article-date">
  	<time datetime="2018-08-07T02:01:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-08-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/08/07/test/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-swiftä¹‹typelayout" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/06/swiftä¹‹typelayout/">swiftä¹‹typelayout</a>
    </h1>
  

        
        <a href="/2018/08/06/swiftä¹‹typelayout/" class="archive-article-date">
  	<time datetime="2018-08-06T02:03:02.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-08-06</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="structå’Œtupleå†…å­˜å¸ƒå±€"><a href="#structå’Œtupleå†…å­˜å¸ƒå±€" class="headerlink" title="structå’Œtupleå†…å­˜å¸ƒå±€"></a>structå’Œtupleå†…å­˜å¸ƒå±€</h2><p>ç»“æ„ä½“å’Œå…ƒç»„å½“å‰å…±äº«ç›¸åŒçš„å¸ƒå±€ç®—æ³•ï¼Œåœ¨ç¼–è¯‘å™¨å®ç°ä¸­ç§°ä¸ºâ€œé€šç”¨â€å¸ƒå±€ç®—æ³•ã€‚ç®—æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸€å¼€å§‹è®¾ç½®sizeä¸º0ï¼Œalignmentä¸º1</li>
<li>éå†å­—æ®µï¼Œå¯¹äºæ¯ä¸ªå­—æ®µï¼š<ul>
<li>å…ˆæ ¹æ®è¿™ä¸ªå­—æ®µçš„alignmentæ¥æ›´æ–°sizeï¼Œè®©è¿™ä¸ªå­—æ®µèƒ½å¤Ÿå¯¹é½</li>
<li>sizeå¢åŠ è¿™ä¸ªå­—æ®µçš„å¤§å°</li>
<li>æ›´æ–°alignmentä¸º Max(alignment,è¿™ä¸ªå­—æ®µçš„alignment)</li>
</ul>
</li>
<li>æœ€ç»ˆæ‹¿åˆ°æ€»çš„sizeå’Œalignmentï¼Œç„¶åsizeæ ¹æ®alignmentå¯¹å…¶ï¼Œå¾—åˆ°stripã€‚</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age:<span class="type">Int64</span> = <span class="number">0</span> </div><div class="line">    <span class="keyword">var</span> sex:<span class="type">UInt16</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> address:<span class="type">Double</span> = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> name:<span class="type">UInt8</span> = <span class="number">0</span></div><div class="line">&#125;</div><div class="line">å¼€å§‹è®¾ç½®size = <span class="number">0</span> ï¼Œalignment = <span class="number">1</span></div><div class="line">ageæ˜¯<span class="number">8</span>å­—èŠ‚å¯¹å…¶ï¼Œsizeä¸º<span class="number">0</span>ï¼Œæ²¡é—®é¢˜ï¼Œä¸éœ€è¦è°ƒæ•´ã€‚</div><div class="line">ageæ˜¯<span class="number">8</span>å­—èŠ‚ï¼Œsizeå¢åŠ <span class="number">8</span></div><div class="line">ageçš„alignmentä¸º<span class="number">8</span>ï¼Œæ›´æ–°alignmentä¸º<span class="type">Max</span>(<span class="number">1</span>,<span class="number">8</span>)</div><div class="line">sexä¸º<span class="number">2</span>å­—èŠ‚å¯¹å…¶,sizeä¸º<span class="number">8</span>ï¼Œæ²¡é—®é¢˜ï¼Œä¸ç”¨è°ƒæ•´ã€‚</div><div class="line">sexæ˜¯<span class="number">2</span>å­—èŠ‚ï¼Œsizeå¢åŠ <span class="number">2</span>ï¼Œä¸º<span class="number">10</span></div><div class="line">sexçš„alignmentä¸º<span class="number">2</span>ï¼Œæ›´æ–°alignmentä¸º<span class="type">Max</span>(<span class="number">8</span>,<span class="number">2</span>)</div><div class="line">addressä¸º<span class="number">8</span>å­—èŠ‚å¯¹å…¶,sizeä¸º<span class="number">10</span>ï¼Œéœ€è°ƒæ•´sizeä¸º<span class="number">16</span>ï¼Œæ¥ä¿è¯å¯¹å…¶ã€‚</div><div class="line">addressæ˜¯<span class="number">8</span>å­—èŠ‚ï¼Œsizeå¢åŠ <span class="number">8</span>ï¼Œä¸º<span class="number">24</span></div><div class="line">addressçš„alignmentä¸º<span class="number">8</span>ï¼Œæ›´æ–°alignmentä¸º<span class="type">Max</span>(<span class="number">8</span>,<span class="number">8</span>)</div><div class="line">nameä¸º<span class="number">1</span>å­—èŠ‚å¯¹å…¶,sizeä¸º<span class="number">24</span>ï¼Œä¸ç”¨è°ƒæ•´ã€‚</div><div class="line">nameæ˜¯<span class="number">1</span>å­—èŠ‚ï¼Œsizeå¢åŠ <span class="number">1</span>ï¼Œä¸º<span class="number">25</span></div><div class="line">nameçš„alignmentä¸º<span class="number">1</span>ï¼Œæ›´æ–°alignmentä¸º<span class="type">Max</span>(<span class="number">8</span>,<span class="number">1</span>)</div><div class="line">æ‰€ä»¥sizeä¸º<span class="number">25</span>ï¼Œ alignmentä¸º<span class="number">8</span>ï¼Œ è°ƒæ•´stripä¸º<span class="number">32</span>ï¼Œä¿è¯å¯¹å…¶ã€‚</div></pre></td></tr></table></figure>
<h2 id="Class-Layout"><a href="#Class-Layout" class="headerlink" title="Class Layout"></a>Class Layout</h2><p>å‚è€ƒ<a href="https://academy.realm.io/posts/goto-mike-ash-exploring-swift-memory-layout/" target="_blank" rel="external">https://academy.realm.io/posts/goto-mike-ash-exploring-swift-memory-layout/</a>, é‡Œé¢æœ‰ä¸€ä¸ªæ¢ç´¢å†…å­˜çš„å·¥å…·<a href="https://github.com/mikeash/memorydumper2ã€‚æˆ‘ä»¬ä¼ ä¸€ä¸ªå˜é‡ç»™ä»–ï¼Œä»–èƒ½åˆ†æå‡ºè¿™ä¸ªæ˜¯ä¸€ä¸ªæŒ‡é’ˆè¿˜æ˜¯å…¶ä»–ä¸œè¥¿ï¼Œå¹¶ç»™å‡ºå…³ç³»å›¾è°±ï¼Œä¸è¿‡éœ€è¦å®‰è£…Graphvizã€‚" target="_blank" rel="external">https://github.com/mikeash/memorydumper2ã€‚æˆ‘ä»¬ä¼ ä¸€ä¸ªå˜é‡ç»™ä»–ï¼Œä»–èƒ½åˆ†æå‡ºè¿™ä¸ªæ˜¯ä¸€ä¸ªæŒ‡é’ˆè¿˜æ˜¯å…¶ä»–ä¸œè¥¿ï¼Œå¹¶ç»™å‡ºå…³ç³»å›¾è°±ï¼Œä¸è¿‡éœ€è¦å®‰è£…Graphvizã€‚</a></p>
<p>classæ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡æ‹¿åˆ°çš„æ˜¯è¿™ä¸ªå®ä¾‹å˜é‡åœ¨å†…å­˜ä¸­çš„å¼•ç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age = <span class="number">0x0101010101010101</span></div><div class="line">    <span class="keyword">var</span> money =  <span class="number">0x0202020202020202</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> p = <span class="type">Person</span>()</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆpæŒ‡å‘çš„å®ä¾‹å¯¹è±¡çš„å†…å­˜æ¨¡å¼å¤§æ¦‚é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-062753.png" alt="image-20180806142751503"></p>
<p>ç°åœ¨è¿˜çœ‹ä¸æ‡‚ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸‹swiftæºç ä¸­çš„ä¸€äº›æ•°æ®ç»“æ„ã€‚</p>
<h4 id="HeapObject"><a href="#HeapObject" class="headerlink" title="HeapObject"></a>HeapObject</h4><p>swiftä¸­æ‰€æœ‰åˆ†é…åœ¨å †ä¸Šçš„ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªHeapObjectã€‚æˆ‘ä»¬çœ‹çœ‹HeapObjectçš„å®šä¹‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** æˆ‘ä»¬çœ‹åˆ°å…¶å®å°±ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªmetadataï¼Œå’Œä¸€ä¸ªInlineRefCounts */</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HeapObject</span> &#123;</span></div><div class="line">  <span class="comment">/// This is always a valid pointer to a metadata object.</span></div><div class="line">  HeapMetadata <span class="keyword">const</span> *metadata;</div><div class="line"></div><div class="line">  InlineRefCounts refCounts;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="HeapMetadata"><a href="#HeapMetadata" class="headerlink" title="HeapMetadata"></a>HeapMetadata</h4><p>HeapMetadataæ˜¯ç±»ç»“æ„ä½“çš„æŒ‡é’ˆã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">//===============HeapMetadata=============</div><div class="line">template &lt;typename Target&gt; struct TargetHeapMetadata;</div><div class="line">using HeapMetadata = TargetHeapMetadata&lt;InProcess&gt;;</div><div class="line">//================TargetHeapMetadata==============</div><div class="line">//ç»§æ‰¿è‡ªTargetMetadataï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œé€šè¿‡Kindåˆå§‹åŒ–å’Œé€šè¿‡TargetAnyClassMetadataåˆå§‹åŒ–</div><div class="line">template &lt;typename Runtime&gt; </div><div class="line">struct TargetHeapMetadata : TargetMetadata&lt;Runtime&gt; &#123;</div><div class="line">  using HeaderType = TargetHeapMetadataHeader&lt;Runtime&gt;;</div><div class="line"></div><div class="line">  TargetHeapMetadata() = default;</div><div class="line">  constexpr TargetHeapMetadata(MetadataKind kind)</div><div class="line">    : TargetMetadata&lt;Runtime&gt;(kind) &#123;&#125;</div><div class="line">#if SWIFT_OBJC_INTEROP</div><div class="line">  constexpr TargetHeapMetadata(TargetAnyClassMetadata&lt;Runtime&gt; *isa)</div><div class="line">    : TargetMetadata&lt;Runtime&gt;(isa) &#123;&#125;</div><div class="line">#endif</div><div class="line">&#125;;</div><div class="line">//=================Kind==========</div><div class="line">enum class MetadataKind : uint32_t &#123;</div><div class="line">#define METADATAKIND(name, value) name = value,</div><div class="line">#define ABSTRACTMETADATAKIND(name, start, end)                                 \</div><div class="line">  name##_Start = start, name##_End = end,</div><div class="line">#include "MetadataKind.def"</div><div class="line">    /** è¿™æ˜¯ä»MetadataKind.defæˆªå–çš„ä¸€æ®µï¼Œå¯ä»¥çœ‹åˆ°å°±æ˜¯å£°æ˜äº†å„ç§Kindçš„æšä¸¾</div><div class="line">NOMINALTYPEMETADATAKIND(Struct, 1)</div><div class="line">NOMINALTYPEMETADATAKIND(Enum, 2)</div><div class="line">NOMINALTYPEMETADATAKIND(Optional, 3)</div><div class="line">METADATAKIND(Opaque, 8)</div><div class="line">METADATAKIND(Tuple, 9)</div><div class="line">METADATAKIND(Function, 10)</div><div class="line">METADATAKIND(Existential, 12)</div><div class="line">METADATAKIND(Metatype, 13)</div><div class="line">METADATAKIND(ObjCClassWrapper, 14)*/</div><div class="line">  LastEnumerated = 2047,</div><div class="line">&#125;;</div><div class="line">//================TargetAnyClassMetadata==========</div><div class="line">//</div><div class="line">template &lt;typename Runtime&gt;</div><div class="line">struct TargetAnyClassMetadata : public TargetHeapMetadata&lt;Runtime&gt; &#123;</div><div class="line">  ....</div><div class="line">  ConstTargetMetadataPointer&lt;Runtime, swift::TargetClassMetadata&gt; Superclass;</div><div class="line">  TargetPointer&lt;Runtime, void&gt; CacheData[2];</div><div class="line">  StoredSize Data;</div><div class="line">  .....</div><div class="line">&#125;;</div><div class="line">struct TargetHeapMetadata : TargetMetadata&lt;Runtime&gt; &#123;</div><div class="line">  ....</div><div class="line">&#125;;</div><div class="line">struct TargetMetadata &#123;</div><div class="line">    //StoredPointeræ˜¯ä¸åŒå¹³å°ä¸ŠæŒ‡é’ˆå¤§å°çš„ç±»å‹ï¼Œ32ä½ä¸Šç›¸å½“äºint32ï¼Œ64ä½ä¸Šä¸ºint64ï¼Œä»–è¦ä¹ˆæ˜¯ä¸€ä¸ªMetaKindæšä¸¾ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªisaæŒ‡é’ˆã€‚</div><div class="line">	StoredPointer Kind;</div><div class="line">&#125;</div><div class="line">ç»¼ä¸Šæˆ‘ä»¬å†çœ‹çœ‹TargetAnyClassMetadataéƒ½æœ‰äº›ä»€ä¹ˆï¼š</div><div class="line">&#123;</div><div class="line">  StoredPointer Kind;</div><div class="line">  ConstTargetMetadataPointer&lt;Runtime, swift::TargetClassMetadata&gt; Superclass;</div><div class="line">  TargetPointer&lt;Runtime, void&gt; CacheData[2];</div><div class="line">  StoredSize Data;</div><div class="line">&#125;</div><div class="line">ç†Ÿæ‚‰ä¹ˆï¼Ÿæ²¡ä»€ä¹ˆæ„Ÿè§‰çš„è¯ï¼Œæˆ‘ä»¬å†çœ‹çœ‹ocçš„classçš„å®šä¹‰ï¼š</div><div class="line">struct objc_class  &#123;</div><div class="line">    Class ISA;//å¯¹åº”Kind</div><div class="line">    Class superclass;//å¯¹åº”Superclass</div><div class="line">    cache_t cache;   //å¯¹åº”cachedata</div><div class="line">    class_data_bits_t bits; //å¯¹åº”Data</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ç»¼ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°HeapMetadataå°±æ˜¯ä¸€ä¸ªç±»ç»“æ„ä½“ã€‚ä»£è¡¨è¿™ä¸ªå®ä¾‹çš„Classã€‚HeapObjectä¸­çš„ç¬¬ä¸€ä¸ªå˜é‡<code>HeapMetadata const *metadata</code>å°±æ˜¯ä¸€ä¸ªæŒ‡å‘Classå¯¹è±¡çš„æŒ‡é’ˆã€‚</p>
</blockquote>
<h4 id="InlineRefCounts"><a href="#InlineRefCounts" class="headerlink" title="InlineRefCounts"></a>InlineRefCounts</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> RefCounts&lt;InlineRefCountBits&gt; InlineRefCounts;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RefCountBits&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RefCounts</span> &#123;</span></div><div class="line">  <span class="built_in">std</span>::atomic&lt;RefCountBits&gt; refCounts;</div><div class="line">  <span class="comment">/** å„ç§æ“ä½œå¼•ç”¨è®¡æ•°çš„æ–¹æ³• */</span></div><div class="line">  incrementSlow()</div><div class="line">  tryIncrementAndPinSlow</div><div class="line">  decrementShouldDeinit</div><div class="line">  .....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»ä¸Šå¯ä»¥çœ‹å‡ºInlineRefCountså°±æ˜¯InlineRefCountBitsï¼Œå¹¶æä¾›äº†å„ç§æ“ä½œå¼•ç”¨è®¡æ•°çš„æ–¹æ³•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> RefCountBitsT&lt;RefCountIsInline&gt; InlineRefCountBits;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;RefCountInlinedness refcountIsInline&gt;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RefCountBitsT</span> &#123;</span></div><div class="line">  <span class="comment">//å¯èƒ½åŒ…å«çš„æ˜¯å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå¯èƒ½åŒ…å«çš„æ˜¯sidetableçš„æŒ‡é’ˆ</span></div><div class="line">  BitsType bits;</div><div class="line">  RefCountBitsT(HeapObjectSideTableEntry* side)</div><div class="line">  RefCountBitsT(<span class="keyword">uint32_t</span> strongExtraCount, <span class="keyword">uint32_t</span> unownedCount)ï¼›</div><div class="line">  <span class="comment">//å°è£…äº†å¯¹å„ä¸ªbitçš„å­˜å‚¨çš„æ“ä½œ</span></div><div class="line">  getUnownedRefCount</div><div class="line">  getIsPinned</div><div class="line">  getIsDeiniting</div><div class="line">  ã€‚ã€‚ã€‚ã€‚ã€‚</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»ä¸Šå¯ä»¥çœ‹åˆ°ï¼ŒrefCountsæ˜¯ä¸€ä¸ªRefCountBitsTç±»ï¼Œç±»ä¸­æœ‰ä¸€ä¸ªbitsã€‚å¦‚æœæ²¡æœ‰sidetableçš„æƒ…å†µï¼Œé‚£ä¹ˆå¼•ç”¨è®¡æ•°ä¼šè®°å½•åœ¨è¿™é‡Œé¢ï¼Œå¦‚æœæœ‰sidetableï¼Œé‚£ä¹ˆåŒ…å«çš„æ˜¯HeapObjectSideTableEntryçš„æŒ‡é’ˆã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//çœ‹çœ‹æ¯ä¸€ä½è¡¨ç¤ºä»€ä¹ˆ(64ä½æƒ…å†µ)</span></div><div class="line">template &lt;&gt;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">RefCountBitOffsets</span>&lt;8&gt; </span>&#123;</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">IsPinnedShift</span> = <span class="number">0</span>;</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">IsPinnedBitCount</span> = <span class="number">1</span>; </div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">IsPinnedMask</span> = maskForField(<span class="type">IsPinned</span>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">UnownedRefCountShift</span> = shiftAfterField(<span class="type">IsPinned</span>);</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">UnownedRefCountBitCount</span> = <span class="number">31</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">UnownedRefCountMask</span> = maskForField(<span class="type">UnownedRefCount</span>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">IsDeinitingShift</span> = shiftAfterField(<span class="type">UnownedRefCount</span>);</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">IsDeinitingBitCount</span> = <span class="number">1</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">IsDeinitingMask</span> = maskForField(<span class="type">IsDeiniting</span>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">StrongExtraRefCountShift</span> = shiftAfterField(<span class="type">IsDeiniting</span>);</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">StrongExtraRefCountBitCount</span> = <span class="number">30</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">StrongExtraRefCountMask</span> = maskForField(<span class="type">StrongExtraRefCount</span>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">UseSlowRCShift</span> = shiftAfterField(<span class="type">StrongExtraRefCount</span>);</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">UseSlowRCBitCount</span> = <span class="number">1</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">UseSlowRCMask</span> = maskForField(<span class="type">UseSlowRC</span>);</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">SideTableShift</span> = <span class="number">0</span>;</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">SideTableBitCount</span> = <span class="number">62</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">SideTableMask</span> = maskForField(<span class="type">SideTable</span>);</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">SideTableUnusedLowBits</span> = <span class="number">3</span>;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">SideTableMarkShift</span> = <span class="type">SideTableBitCount</span>;</div><div class="line">  <span class="keyword">static</span> const size_t <span class="type">SideTableMarkBitCount</span> = <span class="number">1</span>;</div><div class="line">  <span class="keyword">static</span> const uint64_t <span class="type">SideTableMarkMask</span> = maskForField(<span class="type">SideTableMark</span>);</div><div class="line">&#125;;</div><div class="line">===============================</div><div class="line">ä½ä½---ã€‹é«˜ä½</div><div class="line"><span class="number">1</span>ä½         <span class="type">IsPinned</span></div><div class="line"><span class="number">31</span>ä½        <span class="type">UnownedRefCountBit</span></div><div class="line"><span class="number">1</span>ä½         <span class="type">IsDeiniting</span></div><div class="line"><span class="number">30</span>ä½        <span class="type">StrongExtraRefCount</span></div><div class="line"><span class="number">1</span>ä½         <span class="type">UseSlowRC</span></div><div class="line">å¦‚æœæ˜¯æœ‰sidetableçš„æƒ…å†µï¼Œå„ä¸ªbitè¡¨ç¤ºå¦‚ä¸‹ï¼š</div><div class="line"><span class="number">62</span>ä½        <span class="type">SideTable</span>æŒ‡é’ˆ</div><div class="line"><span class="number">1</span>ä½         <span class="type">SideTableMark</span></div><div class="line"><span class="number">1</span>ä½         <span class="type">UseSlowRC</span></div></pre></td></tr></table></figure>
<h4 id="å†çœ‹å¯¹è±¡å†…å­˜å¸ƒå±€"><a href="#å†çœ‹å¯¹è±¡å†…å­˜å¸ƒå±€" class="headerlink" title="å†çœ‹å¯¹è±¡å†…å­˜å¸ƒå±€"></a>å†çœ‹å¯¹è±¡å†…å­˜å¸ƒå±€</h4><p>å†çœ‹çœ‹ä¸€å¼€å§‹çš„å›¾ï¼š</p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-062753.png" alt="image-20180806142751503"></p>
<p>E87b5600100000ï¼šæ˜¯Classçš„åœ°å€ã€‚</p>
<p>02000000000000ï¼šæ˜¯inlinerefã€‚å¼•ç”¨è®¡æ•°ï¼Œä¸è¿‡æ€ä¹ˆéƒ½å’Œçœ‹åˆ°çš„offsetå¯¹ä¸ä¸ŠğŸ˜†ã€‚02é‚£ä¸ªæ˜¯00000010ï¼Œå…¶ä¸­çš„1æ˜¯ä»£è¡¨unowned refçš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> age = <span class="number">0x0102030405060708</span></div><div class="line">    <span class="keyword">var</span> money =  <span class="number">0x0202020202020202</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHello</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"hello"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayWorld</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"world"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> p1 = <span class="type">Person</span>()</div><div class="line"><span class="keyword">let</span> p2 = p1</div><div class="line"><span class="keyword">let</span> p3 = p1</div><div class="line"><span class="keyword">let</span> p4 = p1</div><div class="line"><span class="keyword">let</span> p5 = p1</div><div class="line"><span class="keyword">unowned</span> <span class="keyword">var</span> p6 = p1</div><div class="line"><span class="keyword">unowned</span> <span class="keyword">var</span> p7 = p1</div><div class="line">dumpAndOpenGraph(dumping: p1, maxDepth: <span class="number">10</span>, filename: <span class="string">"SimpleClassPerson"</span>)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æœ‰5ä¸ªé¢å¤–å¼ºå¼•ç”¨ï¼Œ2ä¸ªé¢å¤–æ— ä¸»å¼•ç”¨(æ€»æ•°ä¸º2+1ï¼Œå› ä¸ºåˆå§‹å€¼ä¸º1)ï¼Œè™½ç„¶ä¸çŸ¥é“å…·ä½“çš„offsetè§„åˆ™ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥è‚¯å®šï¼Œä¸€å®šæœ‰ä¸€ä¸ª1010å’Œä¸€ä¸ª11å­åºåˆ—ï¼Œä»£è¡¨5ä¸ªé¢å¤–å¼ºå¼•ç”¨å’Œ3ä¸ªæ— ä¸»å¼•ç”¨ï¼š</p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-104643.png" alt="image-20180806184642107"></p>
<p>å¯ä»¥çœ‹åˆ°06(00000110)ï¼Œå…¶ä¸­11ä½æ— ä¸»å¼•ç”¨æ•°3ï¼Œ0a(00001010),å…¶ä¸­101ä¸ºé¢å¤–å¼ºå¼•ç”¨è®¡æ•°ã€‚</p>
<p>ok,æˆ‘ä»¬åœ¨è¯•è¯•å®šä¹‰ä¸€ä¸ªweakï¼Œè®©å¯¹è±¡æœ‰sidetable(å› ä¸ºweakå¼•ç”¨è®¡æ•°åœ¨sidetableçš„SideTableRefCountBitsä¸­)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">weak</span> <span class="keyword">var</span> p8 = p1</div></pre></td></tr></table></figure>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-105548.png" alt="image-20180806185546375"></p>
<p>å¯ä»¥çœ‹åˆ°refå·²ç»å˜å‘³ä¸€ä¸ªæŒ‡é’ˆ+flagã€‚</p>
<h4 id="Classçš„layout"><a href="#Classçš„layout" class="headerlink" title="Classçš„layout"></a>Classçš„layout</h4><p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-111612.png" alt="image-20180806191610275"></p>
<p>è¿™æ˜¯Personè¿™ä¸ªClassä¸­çš„ä¿¡æ¯ï¼Œè¯»å–çš„ä¿¡æ¯æè¿°ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥è®¤ä¸ºä»–æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„vtableï¼Œæ··æ‚äº†ä¸€äº›ocç±»ç»“æ„ä½“ä¸­çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="type">Class</span> &#123;</div><div class="line">    isa</div><div class="line">    supperclass</div><div class="line">    cache</div><div class="line">    å„ç§methodæŒ‡é’ˆ</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-113027.png" alt="image-20180806193025560"></p>
<p>è¿™æ˜¯æ”¾å¤§çš„éƒ¨åˆ†ï¼Œ128å­—èŠ‚å¼€å§‹æ˜¯sayHelloå‡½æ•°ï¼Œ136å­—èŠ‚å¼€å§‹æ˜¯sayWorldå‡½æ•°ï¼Œè¿˜æœ‰å„ç§getterå’Œsetterç­‰ã€‚</p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-113245.png" alt="image-20180806193243284"><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-113434.png" alt="image-20180806193430161"></p>
<p>ç¬¬8å­—èŠ‚å¼€å§‹ï¼Œä¹Ÿå°±æ•°superclassï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å®šä¹‰çš„Personæ˜¯SwiftObjectçš„å­ç±»ã€‚SwiftObjectæ˜¯ä¸€ä¸ªå®ç°äº†NSObjectåè®®çš„OCç±»ã€‚</p>
<h2 id="æšä¸¾çš„å†…å­˜å¸ƒå±€"><a href="#æšä¸¾çš„å†…å­˜å¸ƒå±€" class="headerlink" title="æšä¸¾çš„å†…å­˜å¸ƒå±€"></a>æšä¸¾çš„å†…å­˜å¸ƒå±€</h2><p>åœ¨layoutæšä¸¾æ—¶ï¼ŒABIä¸ºäº†é¿å…æµªè´¹ç©ºé—´ï¼Œä¼šä»ä»¥ä¸‹çš„5ç§ç­–ç•¥ä¸­é€‰æ‹©ã€‚</p>
<h3 id="Empty-Enums"><a href="#Empty-Enums" class="headerlink" title="Empty Enums"></a>Empty Enums</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Empty</span> </span>&#123;&#125; <span class="comment">// =&gt; empty type</span></div><div class="line">æ­¤æ—¶sizeä¸º<span class="number">0</span>ï¼Œ alignmentä¸º<span class="number">1</span>ï¼Œ ä¸ºäº†å¯¹é½stripä¸º<span class="number">1</span></div></pre></td></tr></table></figure>
<h3 id="Single-Case-Enums"><a href="#Single-Case-Enums" class="headerlink" title="Single-Case Enums"></a>Single-Case Enums</h3><p>å¦‚æœenumåªæœ‰ä¸€ä¸ªcaseï¼Œé‚£ä¹ˆå…³è”äº†ä»€ä¹ˆdataå°±æ€ä¹ˆå¸ƒå±€ï¼Œå¦‚æœæ²¡æœ‰å…³è”ï¼Œé‚£ä¹ˆä¸ºempty(å› ä¸ºåªæœ‰ä¸€ä¸ªcaseä¸éœ€è¦åŒºåˆ†)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">EmptyCase</span> </span>&#123; <span class="keyword">case</span> <span class="type">X</span> &#125;             <span class="comment">// =&gt; empty type</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">DataCase</span> </span>&#123; <span class="keyword">case</span> <span class="type">Y</span>(<span class="type">Int</span>, <span class="type">Double</span>) &#125; <span class="comment">// =&gt; LLVM &lt;&#123; i64, double &#125;&gt;</span></div><div class="line"><span class="type">EmptyCase</span> sizeä¸º<span class="number">0</span> ï¼Œalignment ä¸º<span class="number">1</span>ï¼Œstripä¸º<span class="number">1</span></div><div class="line"><span class="type">DataCase</span> å¸ƒå±€å°±æ˜¯<span class="number">1</span>ä¸ª<span class="type">Int</span>,<span class="type">Double</span>ã€‚æ‰€ä»¥sizeä¸º<span class="number">16</span>ï¼Œalignmentä¸º<span class="number">8</span>ï¼Œstripä¸º<span class="number">16</span></div></pre></td></tr></table></figure>
<h3 id="C-Like-Enums"><a href="#C-Like-Enums" class="headerlink" title="C-Like Enums"></a>C-Like Enums</h3><p>å¦‚æœæ‰€æœ‰caseéƒ½æ²¡æœ‰å…³è”data type,é‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªc-like enumã€‚enumå¸ƒå±€å°±æ˜¯ä¸€ä¸ªæ•´æ•°tagï¼Œç”¨æœ€å°‘çš„bitæ¥æè¿°æ‰€æœ‰caseã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">EnumLike2</span> </span>&#123; <span class="comment">// =&gt; LLVM i1</span></div><div class="line">  <span class="keyword">case</span> <span class="type">A</span>         <span class="comment">// =&gt; i1 0</span></div><div class="line">  <span class="keyword">case</span> <span class="type">B</span>         <span class="comment">// =&gt; i1 1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">EnumLike8</span> </span>&#123; <span class="comment">// =&gt; LLVM i3</span></div><div class="line">  <span class="keyword">case</span> <span class="type">A</span>         <span class="comment">// =&gt; i3 0</span></div><div class="line">  <span class="keyword">case</span> <span class="type">B</span>         <span class="comment">// =&gt; i3 1</span></div><div class="line">  <span class="keyword">case</span> <span class="type">C</span>         <span class="comment">// =&gt; i3 2</span></div><div class="line">  <span class="keyword">case</span> <span class="type">D</span>         <span class="comment">// etc.</span></div><div class="line">  <span class="keyword">case</span> <span class="type">E</span></div><div class="line">  <span class="keyword">case</span> <span class="type">F</span></div><div class="line">  <span class="keyword">case</span> <span class="type">G</span></div><div class="line">  <span class="keyword">case</span> <span class="type">H</span></div><div class="line">&#125;</div><div class="line">sizeä¸º<span class="number">1</span>ï¼Œ alignmentä¸º<span class="number">1</span>ï¼Œstripä¸º<span class="number">1</span>ã€‚ä¸ºä»€ä¹ˆæ˜¯<span class="number">1</span>å‘¢ï¼Œå› ä¸º<span class="number">1</span>ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤º<span class="number">2</span>çš„<span class="number">8</span>æ¬¡æ–¹ç§æƒ…å†µï¼Œè¶³å¤Ÿè¡¨ç¤ºè¿™ä¹ˆå¤š<span class="keyword">case</span>äº†ã€‚é‚£è¶…è¿‡äº†å‘¢ï¼Ÿ</div><div class="line">åˆæ¯”å¦‚</div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">A</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">A0</span></div><div class="line">    <span class="keyword">case</span> <span class="type">A1</span></div><div class="line">    ....</div><div class="line">    <span class="keyword">case</span> <span class="type">A280</span></div><div class="line">&#125;</div><div class="line">æ­¤æ—¶ä¸è¶³ä»¥ç”¨<span class="number">1</span>ä¸ªå­—èŠ‚è¡¨ç¤ºæ‰€ä»¥ï¼Œsizeä¸º<span class="number">2</span>ï¼Œalignmentä¸º<span class="number">2</span>ï¼Œstripä¸º<span class="number">2</span>.</div></pre></td></tr></table></figure>
<h3 id="Single-Payload-Enums"><a href="#Single-Payload-Enums" class="headerlink" title="Single-Payload Enums"></a>Single-Payload Enums</h3><p>å¦‚æœenumæ€»æœ‰å¤šä¸ªcaseï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªå…³è”äº†data typeï¼Œå…¶ä»–éƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸ºsingle-payload enumã€‚æ­¤æ—¶çš„åŸåˆ™å°±æ˜¯å°½é‡å…±ç”¨ç©ºé—´ï¼Œæ— æ³•å…±ç”¨æ—¶ï¼Œå¢åŠ é¢å¤–çš„ä½æ¥åŒºåˆ†æƒ…å†µã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="number">32</span>ä½è¶³å¤Ÿæè¿°æ‰€æœ‰æƒ…å†µï¼Œå°±ç”¨è¿™ä¹ˆå¤š</div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CharOrSectionMarker</span> </span>&#123; <span class="comment">//=&gt; LLVM i32</span></div><div class="line">  <span class="keyword">case</span> <span class="type">Paragraph</span>           <span class="comment">// =&gt; i32 0x0020_0000</span></div><div class="line">  <span class="keyword">case</span> <span class="type">Char</span>(<span class="type">UnicodeScalar</span>) <span class="comment">// =&gt; i32 (zext i21 %Char to i32)</span></div><div class="line">  <span class="keyword">case</span> <span class="type">Chapter</span>             <span class="comment">// =&gt; i32 0x0020_0001</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="type">CharOrSectionMarker</span>.<span class="type">Char</span>('\x00') =&gt; i32 <span class="number">0x0000_0000</span></div><div class="line"><span class="type">CharOrSectionMarker</span>.<span class="type">Char</span>('\u10FFFF') =&gt; i32 <span class="number">0x0010_FFFF</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CharOrSectionMarkerOrFootnoteMarker</span> </span>&#123; =&gt; <span class="type">LLVM</span> i32</div><div class="line">  <span class="keyword">case</span> <span class="type">CharOrSectionMarker</span>(<span class="type">CharOrSectionMarker</span>) =&gt; i32 %<span class="type">CharOrSectionMarker</span></div><div class="line">  <span class="keyword">case</span> <span class="type">Asterisk</span>                                 =&gt; i32 <span class="number">0x0020_0002</span></div><div class="line">  <span class="keyword">case</span> <span class="type">Dagger</span>                                   =&gt; i32 <span class="number">0x0020_0003</span></div><div class="line">  <span class="keyword">case</span> <span class="type">DoubleDagger</span>                             =&gt; i32 <span class="number">0x0020_0004</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ä¸å¤Ÿäº†ï¼Œæ€»çš„æƒ…å†µä¸ºIntæè¿°çš„+2ï¼Œè¶…å‡ºäº†Int8å­—èŠ‚èƒ½è¡¨ç¤ºçš„è®¿é—®ï¼Œå°±åœ¨æœ«å°¾å¢åŠ ä¸€ä¸ªå­—èŠ‚æ¥åŒºåˆ†å°±æ˜¯æ˜¯æœ‰dataè¿˜æ˜¯æ²¡dataã€‚</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">IntOrInfinity</span> </span>&#123; =&gt; <span class="type">LLVM</span> &lt;&#123; i64, i1å¢åŠ ä¸€ä½åŒºåˆ†æœ‰æ²¡data type &#125;&gt;</div><div class="line">  <span class="keyword">case</span> <span class="type">NegInfinity</span>    =&gt; &lt;&#123; i64, i1 &#125;&gt; &#123;    <span class="number">0</span>, <span class="number">1</span> &#125;</div><div class="line">  <span class="keyword">case</span> <span class="type">Int</span>(<span class="type">Int</span>)       =&gt; &lt;&#123; i64, i1 &#125;&gt; &#123; %<span class="type">Int</span>, <span class="number">0</span> &#125;</div><div class="line">  <span class="keyword">case</span> <span class="type">PosInfinity</span>    =&gt; &lt;&#123; i64, i1 &#125;&gt; &#123;    <span class="number">1</span>, <span class="number">1</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="type">IntOrInfinity</span>.<span class="type">Int</span>(    <span class="number">0</span>) =&gt; &lt;&#123; i64, i1 &#125;&gt; &#123;     <span class="number">0</span>, <span class="number">0</span> &#125;</div><div class="line"><span class="type">IntOrInfinity</span>.<span class="type">Int</span>(<span class="number">20721</span>) =&gt; &lt;&#123; i64, i1 &#125;&gt; &#123; <span class="number">20721</span>, <span class="number">0</span> &#125;</div><div class="line">sizeä¸º<span class="number">9</span>ï¼Œalignmentä¸º<span class="number">8</span>ï¼Œstripä¸º<span class="number">16</span></div></pre></td></tr></table></figure>
<h3 id="Multi-Payload-Enums"><a href="#Multi-Payload-Enums" class="headerlink" title="Multi-Payload Enums"></a>Multi-Payload Enums</h3><p>å¦‚æœæœ‰å¤§äº1ä¸ªcaseå…³è”äº†data typeï¼Œé‚£ä¹ˆå°±æ˜¯Multi-Payload Enumsã€‚æ­¤æ—¶ä¹Ÿæ˜¯ä¸€æ ·çš„å°½é‡å…±ç”¨ç©ºé—´ï¼Œæ— æ³•å…±ç”¨æ—¶ï¼Œå¢åŠ bitè¿›è¡ŒåŒºåˆ†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bignum</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">IntDoubleOrBignum</span> </span>&#123; =&gt; <span class="type">LLVM</span> &lt;&#123; i64, i2å¢åŠ ä¸¤ä½åŒºåˆ†<span class="number">3</span>ä¸­æƒ…å†µ &#125;&gt;</div><div class="line">  <span class="keyword">case</span> <span class="type">Int</span>(<span class="type">Int</span>)           =&gt; &lt;&#123; i64, i2 &#125;&gt; &#123;           %<span class="type">Int</span>,            <span class="number">0</span> &#125;</div><div class="line">  <span class="keyword">case</span> <span class="type">Double</span>(<span class="type">Double</span>)     =&gt; &lt;&#123; i64, i2 &#125;&gt; &#123; (bitcast  %<span class="type">Double</span> to i64), <span class="number">1</span> &#125;</div><div class="line">  <span class="keyword">case</span> <span class="type">Bignum</span>(<span class="type">Bignum</span>)     =&gt; &lt;&#123; i64, i2 &#125;&gt; &#123; (ptrtoint %<span class="type">Bignum</span> to i64), <span class="number">2</span> &#125;</div><div class="line">&#125;</div><div class="line">sizeä¸º<span class="number">9</span>ï¼Œalignmentä¸º<span class="number">8</span>ï¼Œstripä¸º<span class="number">16</span></div></pre></td></tr></table></figure>
<h2 id="Existential-Container-Layout"><a href="#Existential-Container-Layout" class="headerlink" title="Existential Container Layout"></a>Existential Container Layout</h2><p>protocolç±»å‹ã€ç»„åˆåè®®ç±»å‹ã€Anyç­‰è¿™äº›æ— æ³•ç¡®å®šå¤§å°çš„ç±»å‹ï¼Œä»–ä»¬éƒ½Existential Containerã€‚å…·æœ‰åŒæ ·çš„layoutã€‚</p>
<h4 id="protocol"><a href="#protocol" class="headerlink" title="protocol"></a>protocol</h4><p>Existential Containerså¿…é¡»å®¹çº³ä»»æ„å¤§å°å’Œå¯¹é½çš„å€¼ã€‚æ­¤æ—¶ä½¿ç”¨3ä¸ªæŒ‡é’ˆå¤§å°çš„å›ºå®šæ•°æ®åŒºã€‚å¦‚æœä»–çš„å¤§å°å’Œå¯¹å…¶éƒ½å°äºç­‰äºå›ºå®šç¼“å†²åŒºçš„å¤§å°ï¼Œåˆ™ç›´æ¥åŒ…å«è¯¥å€¼ã€‚å¦‚æœä¸èƒ½åŒ…å«ï¼Œè¿™å­˜å‚¨ä¸€ä¸ªæŒ‡å‘å…¶æ•°æ®çš„æŒ‡é’ˆã€‚å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œç”±ä¸€ä¸ªç±»å‹å…ƒæ•°æ®è®°å½•æ ‡è¯†ã€‚protocolçš„æ–¹æ³•åœ¨witnesstableä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OpaqueExistentialContainer</span> </span>&#123;</div><div class="line">  void *fixedSizeBuffer[<span class="number">3</span>];<span class="comment">//æ•°æ®åŒº</span></div><div class="line">  <span class="type">Metadata</span> *type;<span class="comment">//æ•°æ®åŒºçš„ç±»å‹</span></div><div class="line">  <span class="type">WitnessTable</span> *witnessTables[<span class="type">NUM_WITNESS_TABLES</span>];<span class="comment">//protocolçš„witnesstable</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StructSmallP</span>: <span class="title">P</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">h</span><span class="params">()</span></span> &#123;&#125;</div><div class="line">    <span class="keyword">var</span> a = <span class="number">0x6c6c616d73</span></div><div class="line">    <span class="keyword">var</span> b = <span class="number">0x6c6c616d73</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> p = <span class="type">StructSmallP</span>()</div><div class="line">dumpAndOpenGraph(dumping:p , maxDepth: <span class="number">4</span>, filename: <span class="string">"StructSmallP"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-115234.png" alt="image-20180806195232768"></p>
<p>å°±ä¸¤ä¸ªIntçš„ç©ºé—´ã€‚okï¼Œç°åœ¨æˆ‘ä»¬ç”¨Existential Containeræ¥å­˜å‚¨ä»–ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> p:<span class="type">P</span> = <span class="type">StructSmallP</span>()<span class="comment">//å®šä¹‰ä¸ºP</span></div><div class="line">dumpAndOpenGraph(dumping:p , maxDepth: <span class="number">4</span>, filename: <span class="string">"StructSmallP"</span>)</div></pre></td></tr></table></figure>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-115440.png" alt="image-20180806195438131"></p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-115518.png" alt="image-20180806195516667"></p>
<p>å‰ä¸¤ä¸ªä¸ºstructçš„aå’Œbã€‚å‰3ä¸ªç¼“å†²åŒºå‰©ä½™ç©ºé—´ä¼šç”¨äºå­˜æ”¾valuewitnesstableï¼ŒåŒ…å«ä¸€äº›åˆå§‹åŒ–å‡½æ•°ï¼Œå¦‚æœæ²¡ç©ºé—´äº†å°±æ²¡æœ‰è¿™ä¸ªã€‚ç¬¬å››ä¸ªä¸ºtypeï¼Œç¬¬5ä¸ªä¸ºprotocol witnesstableã€‚æ­£å¦‚æˆ‘ä»¬æœ€å¼€å§‹çœ‹åˆ°çš„é‚£æ ·ï¼š3ä¸ªç¼“å†²åŒºï¼Œä¸€ä¸ªtypeï¼Œä¸€ä¸ªpwtã€‚</p>
<h4 id="AnyObject"><a href="#AnyObject" class="headerlink" title="AnyObject"></a>AnyObject</h4><p>AnyObjectç”±äºå¯¹è±¡éƒ½æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨å¤§å°ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> objs = [<span class="type">ClassA</span>(),<span class="type">ClassB</span>(),<span class="type">ClassC</span>()]</div></pre></td></tr></table></figure>
<h4 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h4><p>å’Œprotocolç±»ä¼¼ï¼Œåªæ˜¯æ²¡æœ‰äº†protocol witness tableã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">OpaqueExistentialContainer</span> &#123;</span></div><div class="line">  <span class="keyword">void</span> *fixedSizeBuffer[<span class="number">3</span>];<span class="comment">//æ•°æ®åŒº</span></div><div class="line">  Metadata *type;<span class="comment">//æ•°æ®åŒºçš„ç±»å‹</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-08-06-123107.png" alt="image-20180806203105238"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">swift</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/08/06/swiftä¹‹typelayout/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-æŸ¥çœ‹appstoreè¢«æ‹’å›¾ç‰‡è¿”å›403" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/07/æŸ¥çœ‹appstoreè¢«æ‹’å›¾ç‰‡è¿”å›403/">æŸ¥çœ‹appstoreè¢«æ‹’å›¾ç‰‡è¿”å›403</a>
    </h1>
  

        
        <a href="/2018/07/07/æŸ¥çœ‹appstoreè¢«æ‹’å›¾ç‰‡è¿”å›403/" class="archive-article-date">
  	<time datetime="2018-07-07T07:50:04.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-07-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://discussions.apple.com/thread/6684554" target="_blank" rel="external">https://discussions.apple.com/thread/6684554</a></p>
<p>Back up all data.</p>
<p>From the menu bar, select</p>
<p>ï£¿ â–¹ System Preferencesâ€¦ â–¹ Network</p>
<p>If the preference pane is locked, click the lock icon in the lower left corner and enter your password to unlock it. Then click the Advanced button and select the Proxies tab. If any proxy options are selected, make a note of them and then deselect them. You donâ€™t need to change the bypass or FTP settings. Click OK and then Apply. Test. The result may be that you canâ€™t connect to any web server. Restore the previous settings if that happens.</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">appstore</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/07/07/æŸ¥çœ‹appstoreè¢«æ‹’å›¾ç‰‡è¿”å›403/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-iosæ— æ³•åŠ è½½æœ¬åœ°çš„html" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/26/iosæ— æ³•åŠ è½½æœ¬åœ°çš„html/">iosæ— æ³•åŠ è½½æœ¬åœ°çš„html</a>
    </h1>
  

        
        <a href="/2018/06/26/iosæ— æ³•åŠ è½½æœ¬åœ°çš„html/" class="archive-article-date">
  	<time datetime="2018-06-26T10:16:01.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-06-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä»Šå¤©ä»documentç›®å½•ä¸‹ä½¿ç”¨WKWebViewåŠ è½½htmlï¼Œæ€ä¹ˆéƒ½åŠ è½½ä¸å‡ºæ¥ã€‚æœç´¢äº†ä¸€ä¸‹ï¼Œå¯ä»¥å‚è§ï¼š</p>
<p><a href="https://stackoverflow.com/questions/24882834/wkwebview-not-loading-local-files-under-ios-8" target="_blank" rel="external">https://stackoverflow.com/questions/24882834/wkwebview-not-loading-local-files-under-ios-8</a></p>
<p>åŸå› æ˜¯wkwebviewçš„bugã€‚</p>
<p>ä¿®æ”¹æ–¹æ¡ˆæ˜¯ï¼š</p>
<p>åœ¨ios9ä»¥ä¸Šçš„ä½¿ç”¨loadFileURLè¿™ä¸ªæ–¹æ³•åŠ è½½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[_transactionWebView loadFileURL:htmlUrl allowingReadAccessToURL:dirUrl];</div></pre></td></tr></table></figure>
<p>ios8çš„éœ€è¦å°†è¦è®¿é—®çš„èµ„æºç§»åŠ¨åˆ°tempç›®å½•ä¸‹æ‰èƒ½è®¿é—®ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">ios wkwebview</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/06/26/iosæ— æ³•åŠ è½½æœ¬åœ°çš„html/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-springmvc-æ–‡æ¡£æ¦‚è§ˆ" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/26/springmvc-æ–‡æ¡£æ¦‚è§ˆ/">springmvc-æ³¨è§£</a>
    </h1>
  

        
        <a href="/2018/06/26/springmvc-æ–‡æ¡£æ¦‚è§ˆ/" class="archive-article-date">
  	<time datetime="2018-06-26T01:52:36.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-06-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-4-Annotated-Controllers"><a href="#1-4-Annotated-Controllers" class="headerlink" title="1.4. Annotated Controllers"></a>1.4. Annotated Controllers</h2><p>springmvcæä¾›äº†åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹ï¼Œæ¯”å¦‚@Controller,@RestController.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle</span><span class="params">(Model model)</span> </span>&#123;</div><div class="line">        model.addAttribute(<span class="string">"message"</span>, <span class="string">"Hello World!"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-4-1-Declaration"><a href="#1-4-1-Declaration" class="headerlink" title="1.4.1. Declaration"></a>1.4.1. Declaration</h3><p>å¯¹äº@Controller @Componentç­‰çš„beanså¯ä»¥ç”±springè‡ªåŠ¨æ£€æµ‹ã€‚ä¸è¿‡è¿™å¹¶ä¸æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œä½ è¿˜éœ€è¦è®¾ç½®ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//é€šè¿‡java config</span></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span>(<span class="string">"org.example.web"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">é€šè¿‡xmlçš„æ–¹å¼</div><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></div><div class="line">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></div><div class="line">        http://www.springframework.org/schema/beans</div><div class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/context</div><div class="line">        http://www.springframework.org/schema/context/spring-context.xsd"&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"org.example.web"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- ... --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="1-4-2-Request-Mapping"><a href="#1-4-2-Request-Mapping" class="headerlink" title="1.4.2. Request Mapping"></a>1.4.2. Request Mapping</h3><p>@RequestMappingæ˜¯ç”¨æ¥å°†ä¸€ä¸ªrequestæ˜ å°„åˆ°ä¸€ä¸ªæ–¹æ³•ä¸Šã€‚æ—¢å¯ä»¥ä¿®é¥°æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®é¥°controllerã€‚</p>
<p>æ ¹æ®ä¸åŒçš„httpè¯·æ±‚æ–¹æ³•ä¹Ÿæœ‰äº›ç®€å†™ï¼š</p>
<ul>
<li><code>@GetMapping</code></li>
<li><code>@PostMapping</code></li>
<li><code>@PutMapping</code></li>
<li><code>@DeleteMapping</code></li>
<li><code>@PatchMapping</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/persons"</span>)</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">getPerson</span><span class="params">(@PathVariable Long id)</span> </span>&#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@PostMapping</span></div><div class="line">    <span class="meta">@ResponseStatus</span>(HttpStatus.CREATED)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(@RequestBody Person person)</span> </span>&#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="URI-patterns"><a href="#URI-patterns" class="headerlink" title="URI patterns"></a>URI patterns</h4><p>å¯¹äºä½ åŒ¹é…çš„urlï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼Ÿã€<em>ã€*</em>æ¥è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚</p>
<ul>
<li>ï¼Ÿ:åŒ¹é…å•ä¸ªå­—ç¬¦</li>
<li>*ï¼šåŒ¹é…ä¸€ä¸ªpath segmentä¸­çš„ä»»æ„å¤šä¸ªå­—ç¬¦</li>
<li>**ï¼šåŒ¹é…ä»»æ„å¤šä¸ªpath segmentsã€‚</li>
</ul>
<p>ä½ è¿˜å¯ä»¥åœ¨pathä¸­é€šè¿‡{varName}æŒ‡å®šå˜é‡,ç„¶åå†æ–¹æ³•å‚æ•°ä¸­é€šè¿‡@PathVariableè·å–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@GetMapping</span>(<span class="string">"/owners/&#123;ownerId&#125;/pets/&#123;petId&#125;"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> Pet <span class="title">findPet</span><span class="params">(@PathVariable Long ownerId, @PathVariable Long petId)</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>uriå˜é‡ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºä½ æŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœä¸èƒ½è½¬æ¢ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºTypeMismatchExceptionå¼‚å¸¸ã€‚</p>
<p>ä½ è¿˜å¯ä»¥ä¸ºå˜é‡æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼{varName:regx}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@GetMapping</span>(<span class="string">"/&#123;name:[a-z-]+&#125;-&#123;version:\\d\\.\\d\\.\\d&#125;&#123;ext:\\.[a-z]+&#125;"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(@PathVariable String version, @PathVariable String ext)</span> </span>&#123;</div><div class="line">    <span class="comment">// /spring-web-3.0.5 .jar</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ è¿˜å¯ä»¥ç”¨${}æ¥å¼•ç”¨placeholderã€‚</p>
<h4 id="Pattern-comparison"><a href="#Pattern-comparison" class="headerlink" title="Pattern comparison"></a>Pattern comparison</h4><p>å½“ä¸€ä¸ªURLåŒæ—¶åŒ¹é…å¤šä¸ªæ¨¡å¼æ—¶ï¼Œåªä¼šé€‰æ‹©æœ€åŒ¹é…çš„ä¸€ä¸ªï¼š</p>
<ul>
<li>URIæ¨¡å¼å˜é‡çš„æ•°ç›®å’Œé€šé…ç¬¦æ•°é‡çš„æ€»å’Œæœ€å°‘çš„é‚£ä¸ªè·¯å¾„æ¨¡å¼æ›´å‡†ç¡®ã€‚æ¯”å¦‚ï¼Œ<code>/hotels/{hotel}/*</code>è¿™ä¸ªè·¯å¾„æ‹¥æœ‰ä¸€ä¸ªURIå˜é‡å’Œä¸€ä¸ªé€šé…ç¬¦ï¼Œè€Œ<code>/hotels/{hotel}/**</code>è¿™ä¸ªè·¯å¾„åˆ™æ‹¥æœ‰ä¸€ä¸ªURIå˜é‡å’Œä¸¤ä¸ªé€šé…ç¬¦ï¼Œå› æ­¤å‰è€…æ˜¯æ›´å‡†ç¡®çš„è·¯å¾„æ¨¡å¼ã€‚</li>
<li>å¦‚æœä¸¤ä¸ªæ¨¡å¼çš„URIæ¨¡å¼æ•°é‡å’Œé€šé…ç¬¦æ•°é‡æ€»å’Œä¸€è‡´ï¼Œåˆ™è·¯å¾„æ›´é•¿çš„é‚£ä¸ªæ¨¡å¼æ›´å‡†ç¡®ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ<code>/foo/bar*</code>å°±è¢«è®¤ä¸ºæ¯”<code>/foo/*</code>æ›´å‡†ç¡®ï¼Œå› ä¸ºå‰è€…çš„è·¯å¾„æ›´é•¿ã€‚</li>
<li>å¦‚æœä¸¤ä¸ªæ¨¡å¼çš„æ•°é‡å’Œé•¿åº¦å‡ä¸€è‡´ï¼Œåˆ™é‚£ä¸ªå…·æœ‰æ›´å°‘é€šé…ç¬¦çš„æ¨¡å¼æ˜¯æ›´åŠ å‡†ç¡®çš„ã€‚æ¯”å¦‚ï¼Œ<code>/hotels/{hotel}</code>å°±æ¯”<code>/hotels/*</code>æ›´ç²¾ç¡®ã€‚</li>
<li>é»˜è®¤çš„é€šé…æ¨¡å¼<code>/**</code>æ¯”å…¶ä»–æ‰€æœ‰çš„æ¨¡å¼éƒ½æ›´â€œä¸å‡†ç¡®â€ã€‚æ¯”æ–¹è¯´ï¼Œ<code>/api/{a}/{b}/{c}</code>å°±æ¯”é»˜è®¤çš„é€šé…æ¨¡å¼<code>/**</code>è¦æ›´å‡†ç¡®</li>
<li>å‰ç¼€é€šé…ï¼ˆæ¯”å¦‚<code>/public/**</code>)è¢«è®¤ä¸ºæ¯”å…¶ä»–ä»»ä½•ä¸åŒ…æ‹¬åŒé€šé…ç¬¦çš„æ¨¡å¼æ›´ä¸å‡†ç¡®ã€‚æ¯”å¦‚è¯´ï¼Œ<code>/public/path3/{a}/{b}/{c}</code>å°±æ¯”<code>/public/**</code>æ›´å‡†ç¡®</li>
</ul>
<h4 id="Consumable-media-types"><a href="#Consumable-media-types" class="headerlink" title="Consumable media types"></a>Consumable media types</h4><p>åŒ¹é…requestä¸­çš„Content-Type</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@PostMapping</span>(path = <span class="string">"/pets"</span>, consumes = <span class="string">"application/json"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPet</span><span class="params">(@RequestBody Pet pet)</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ”¯æŒï¼è¿ç®—ç¬¦ï¼Œå–å</p>
<h4 id="Producible-media-types"><a href="#Producible-media-types" class="headerlink" title="Producible media types"></a>Producible media types</h4><p>åŒ¹é…requestä¸­çš„Accept</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@GetMapping</span>(path = <span class="string">"/pets/&#123;petId&#125;"</span>, produces = <span class="string">"application/json;charset=UTF-8"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function"><span class="keyword">public</span> Pet <span class="title">getPet</span><span class="params">(@PathVariable String petId)</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Parameters-headers"><a href="#Parameters-headers" class="headerlink" title="Parameters, headers"></a>Parameters, headers</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@GetMapping</span>(path = <span class="string">"/pets/&#123;petId&#125;"</span>, params = <span class="string">"myParam=myValue"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findPet</span><span class="params">(@PathVariable String petId)</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@GetMapping</span>(path = <span class="string">"/pets"</span>, headers = <span class="string">"myHeader=myValue"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findPet</span><span class="params">(@PathVariable String petId)</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-4-3-Handler-Methods"><a href="#1-4-3-Handler-Methods" class="headerlink" title="1.4.3. Handler Methods"></a>1.4.3. Handler Methods</h3><p>@RequestMappingä¿®é¥°çš„æ–¹æ³•è¿˜æ˜¯æœ‰äº›é™åˆ¶çš„ã€‚ä»–ä»¬çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œåªèƒ½æ˜¯æŸäº›å›ºå®šç±»å‹ã€‚</p>
<h4 id="Method-Arguments"><a href="#Method-Arguments" class="headerlink" title="Method Arguments"></a>Method Arguments</h4><table>
<thead>
<tr>
<th>Controller method argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WebRequest</code>, <code>NativeWebRequest</code></td>
<td>Generic access to request parameters, request &amp; session attributes, without direct use of the Servlet API.</td>
</tr>
<tr>
<td><code>javax.servlet.ServletRequest</code>, <code>javax.servlet.ServletResponse</code></td>
<td>Choose any specific request or response typeâ€‰â€”â€‰e.g. <code>ServletRequest</code>, <code>HttpServletRequest</code>, or Springâ€™s <code>MultipartRequest</code>, <code>MultipartHttpServletRequest</code>.</td>
</tr>
<tr>
<td><code>javax.servlet.http.HttpSession</code></td>
<td>Enforces the presence of a session. As a consequence, such an argument is never <code>null</code>. <strong>Note:</strong> Session access is not thread-safe. Consider setting the<code>RequestMappingHandlerAdapter</code>â€˜s â€œsynchronizeOnSessionâ€ flag to â€œtrueâ€ if multiple requests are allowed to access a session concurrently.</td>
</tr>
<tr>
<td><code>javax.servlet.http.PushBuilder</code></td>
<td>Servlet 4.0 push builder API for programmatic HTTP/2 resource pushes. Note that per Servlet spec, the injected <code>PushBuilder</code> instance can be null if the client does not support that HTTP/2 feature.</td>
</tr>
<tr>
<td><code>java.security.Principal</code></td>
<td>Currently authenticated user; possibly a specific <code>Principal</code> implementation class if known.</td>
</tr>
<tr>
<td><code>HttpMethod</code></td>
<td>The HTTP method of the request.</td>
</tr>
<tr>
<td><code>java.util.Locale</code></td>
<td>The current request locale, determined by the most specific <code>LocaleResolver</code>available, in effect, the configured <code>LocaleResolver</code>/<code>LocaleContextResolver</code>.</td>
</tr>
<tr>
<td><code>java.util.TimeZone</code> + <code>java.time.ZoneId</code></td>
<td>The time zone associated with the current request, as determined by a <code>LocaleContextResolver</code>.</td>
</tr>
<tr>
<td><code>java.io.InputStream</code>, <code>java.io.Reader</code></td>
<td>For access to the raw request body as exposed by the Servlet API.</td>
</tr>
<tr>
<td><code>java.io.OutputStream</code>, <code>java.io.Writer</code></td>
<td>For access to the raw response body as exposed by the Servlet API.</td>
</tr>
<tr>
<td><code>@PathVariable</code></td>
<td>For access to URI template variables. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-requestmapping-uri-templates" target="_blank" rel="external">URI patterns</a>.</td>
</tr>
<tr>
<td><code>@MatrixVariable</code></td>
<td>For access to name-value pairs in URI path segments. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-matrix-variables" target="_blank" rel="external">Matrix variables</a>.</td>
</tr>
<tr>
<td><code>@RequestParam</code></td>
<td>For access to Servlet request parameters. Parameter values are converted to the declared method argument type. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-requestparam" target="_blank" rel="external">@RequestParam</a>.Note that use of <code>@RequestParam</code> is optional, e.g. to set its attributes. See â€œAny other argumentâ€ further below in this table.</td>
</tr>
<tr>
<td><code>@RequestHeader</code></td>
<td>For access to request headers. Header values are converted to the declared method argument type. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-requestheader" target="_blank" rel="external">@RequestHeader</a>.</td>
</tr>
<tr>
<td><code>@CookieValue</code></td>
<td>For access to cookies. Cookies values are converted to the declared method argument type. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-cookievalue" target="_blank" rel="external">@CookieValue</a>.</td>
</tr>
<tr>
<td><code>@RequestBody</code></td>
<td>For access to the HTTP request body. Body content is converted to the declared method argument type using <code>HttpMessageConverter</code>s. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-requestbody" target="_blank" rel="external">@RequestBody</a>.</td>
</tr>
<tr>
<td><code>HttpEntity&lt;B&gt;</code></td>
<td>For access to request headers and body. The body is converted with <code>HttpMessageConverter</code>s. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-httpentity" target="_blank" rel="external">HttpEntity</a>.</td>
</tr>
<tr>
<td><code>@RequestPart</code></td>
<td>For access to a part in a â€œmultipart/form-dataâ€ request. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-multipart-forms" target="_blank" rel="external">Multipart</a>.</td>
</tr>
<tr>
<td><code>java.util.Map</code>, <code>org.springframework.ui.Model</code>, <code>org.springframework.ui.ModelMap</code></td>
<td>For access to the model that is used in HTML controllers and exposed to templates as part of view rendering.</td>
</tr>
<tr>
<td><code>RedirectAttributes</code></td>
<td>Specify attributes to use in case of a redirectâ€‰â€”â€‰i.e. to be appended to the query string, and/or flash attributes to be stored temporarily until the request after redirect. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-redirecting-passing-data" target="_blank" rel="external">Redirect attributes</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-flash-attributes" target="_blank" rel="external">Flash attributes</a>.</td>
</tr>
<tr>
<td><code>@ModelAttribute</code></td>
<td>For access to an existing attribute in the model (instantiated if not present) with data binding and validation applied. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-modelattrib-method-args" target="_blank" rel="external">@ModelAttribute</a> as well as <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-modelattrib-methods" target="_blank" rel="external">Model</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-initbinder" target="_blank" rel="external">DataBinder</a>.Note that use of <code>@ModelAttribute</code> is optional, e.g. to set its attributes. See â€œAny other argumentâ€ further below in this table.</td>
</tr>
<tr>
<td><code>Errors</code>, <code>BindingResult</code></td>
<td>For access to errors from validation and data binding for a command object (i.e. <code>@ModelAttribute</code> argument), or errors from the validation of an <code>@RequestBody</code>or <code>@RequestPart</code> arguments; an <code>Errors</code>, or <code>BindingResult</code> argument must be declared immediately after the validated method argument.</td>
</tr>
<tr>
<td><code>SessionStatus</code> + class-level <code>@SessionAttributes</code></td>
<td>For marking form processing complete which triggers cleanup of session attributes declared through a class-level <code>@SessionAttributes</code> annotation. See<a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-sessionattributes" target="_blank" rel="external">@SessionAttributes</a> for more details.</td>
</tr>
<tr>
<td><code>UriComponentsBuilder</code></td>
<td>For preparing a URL relative to the current requestâ€™s host, port, scheme, context path, and the literal part of the servlet mapping also taking into account <code>Forwarded</code> and <code>X-Forwarded-*</code> headers. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-uri-building" target="_blank" rel="external">URI Links</a>.</td>
</tr>
<tr>
<td><code>@SessionAttribute</code></td>
<td>For access to any session attribute; in contrast to model attributes stored in the session as a result of a class-level <code>@SessionAttributes</code> declaration. See<a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-sessionattribute" target="_blank" rel="external">@SessionAttribute</a> for more details.</td>
</tr>
<tr>
<td><code>@RequestAttribute</code></td>
<td>For access to request attributes. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-requestattrib" target="_blank" rel="external">@RequestAttribute</a> for more details.</td>
</tr>
<tr>
<td>Any other argument</td>
<td>If a method argument is not matched to any of the above, by default it is resolved as an <code>@RequestParam</code> if it is a simple type, as determined by<a href="https://docs.spring.io/spring-framework/docs/5.0.7.RELEASE/javadoc-api/org/springframework/beans/BeanUtils.html#isSimpleProperty-java.lang.Class-" target="_blank" rel="external">BeanUtils#isSimpleProperty</a>, or as an <code>@ModelAttribute</code> otherwise.</td>
</tr>
</tbody>
</table>
<h4 id="Return-Values"><a href="#Return-Values" class="headerlink" title="Return Values"></a>Return Values</h4><p>for more details.</p>
<table>
<thead>
<tr>
<th>Controller method return value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@ResponseBody</code></td>
<td>The return value is converted through <code>HttpMessageConverter</code>s and written to the response. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-responsebody" target="_blank" rel="external">@ResponseBody</a>.</td>
</tr>
<tr>
<td><code>HttpEntity&lt;B&gt;</code>, <code>ResponseEntity&lt;B&gt;</code></td>
<td>The return value specifies the full response including HTTP headers and body be converted through <code>HttpMessageConverter</code>s and written to the response. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-responseentity" target="_blank" rel="external">ResponseEntity</a>.</td>
</tr>
<tr>
<td><code>HttpHeaders</code></td>
<td>For returning a response with headers and no body.</td>
</tr>
<tr>
<td><code>String</code></td>
<td>A view name to be resolved with <code>ViewResolver</code>â€˜s and used together with the implicit modelâ€‰â€”â€‰determined through command objects and <code>@ModelAttribute</code> methods. The handler method may also programmatically enrich the model by declaring a <code>Model</code> argument (see above).</td>
</tr>
<tr>
<td><code>View</code></td>
<td>A <code>View</code> instance to use for rendering together with the implicit modelâ€‰â€”â€‰determined through command objects and <code>@ModelAttribute</code> methods. The handler method may also programmatically enrich the model by declaring a <code>Model</code> argument (see above).</td>
</tr>
<tr>
<td><code>java.util.Map</code>, <code>org.springframework.ui.Model</code></td>
<td>Attributes to be added to the implicit model with the view name implicitly determined through a <code>RequestToViewNameTranslator</code>.</td>
</tr>
<tr>
<td><code>@ModelAttribute</code></td>
<td>An attribute to be added to the model with the view name implicitly determined through a <code>RequestToViewNameTranslator</code>.Note that <code>@ModelAttribute</code> is optional. See â€œAny other return valueâ€ further below in this table.</td>
</tr>
<tr>
<td><code>ModelAndView</code> object</td>
<td>The view and model attributes to use, and optionally a response status.</td>
</tr>
<tr>
<td><code>void</code></td>
<td>A method with a <code>void</code> return type (or <code>null</code> return value) is considered to have fully handled the response if it also has a <code>ServletResponse</code>, or an <code>OutputStream</code> argument, or an <code>@ResponseStatus</code> annotation. The same is true also if the controller has made a positive ETag or lastModified timestamp check (see <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-caching-etag-lastmodified" target="_blank" rel="external">Controllers</a> for details).If none of the above is true, a <code>void</code> return type may also indicate â€œno response bodyâ€ for REST controllers, or default view name selection for HTML controllers.</td>
</tr>
<tr>
<td><code>DeferredResult&lt;V&gt;</code></td>
<td>Produce any of the above return values asynchronously from any threadâ€‰â€”â€‰e.g. possibly as a result of some event or callback. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async" target="_blank" rel="external">Async Requests</a>and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async-deferredresult" target="_blank" rel="external"><code>DeferredResult</code></a>.</td>
</tr>
<tr>
<td><code>Callable&lt;V&gt;</code></td>
<td>Produce any of the above return values asynchronously in a Spring MVC managed thread. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async" target="_blank" rel="external">Async Requests</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async-callable" target="_blank" rel="external"><code>Callable</code></a>.</td>
</tr>
<tr>
<td><code>ListenableFuture&lt;V&gt;</code>,<code>java.util.concurrent.CompletionStage&lt;V&gt;</code>,<code>java.util.concurrent.CompletableFuture&lt;V&gt;</code></td>
<td>Alternative to <code>DeferredResult</code> as a convenience for example when an underlying service returns one of those.</td>
</tr>
<tr>
<td><code>ResponseBodyEmitter</code>, <code>SseEmitter</code></td>
<td>Emit a stream of objects asynchronously to be written to the response with <code>HttpMessageConverter</code>â€˜s; also supported as the body of a <code>ResponseEntity</code>. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async" target="_blank" rel="external">Async Requests</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async-http-streaming" target="_blank" rel="external">HTTP Streaming</a>.</td>
</tr>
<tr>
<td><code>StreamingResponseBody</code></td>
<td>Write to the response <code>OutputStream</code> asynchronously; also supported as the body of a <code>ResponseEntity</code>. See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async" target="_blank" rel="external">Async Requests</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async-http-streaming" target="_blank" rel="external">HTTP Streaming</a>.</td>
</tr>
<tr>
<td>Reactive typesâ€‰â€”â€‰Reactor, RxJava, or others via <code>ReactiveAdapterRegistry</code></td>
<td>Alternative to <code>DeferredResult</code> with multi-value streams (e.g. <code>Flux</code>, <code>Observable</code>) collected to a <code>List</code>.For streaming scenariosâ€‰â€”â€‰e.g. <code>text/event-stream</code>, <code>application/json+stream</code>â€‰â€”â€‰ <code>SseEmitter</code> and <code>ResponseBodyEmitter</code> are used instead, where <code>ServletOutputStream</code>blocking I/O is performed on a Spring MVC managed thread and back pressure applied against the completion of each write.See <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async" target="_blank" rel="external">Async Requests</a> and <a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-ann-async-reactive-types" target="_blank" rel="external">Reactive types</a>.</td>
</tr>
<tr>
<td>Any other return value</td>
<td>If a return value is not matched to any of the above, by default it is treated as a view name, if it is <code>String</code> or <code>void</code> (default view name selection via <code>RequestToViewNameTranslator</code> applies); or as a model attribute to be added to the model, unless it is a simple type, as determined by <a href="https://docs.spring.io/spring-framework/docs/5.0.7.RELEASE/javadoc-api/org/springframework/beans/BeanUtils.html#isSimpleProperty-java.lang.Class-" target="_blank" rel="external">BeanUtils#isSimpleProperty</a> in which case it remains unresolved.</td>
</tr>
</tbody>
</table>
<p>##### </p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">springmvc java</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/06/26/springmvc-æ–‡æ¡£æ¦‚è§ˆ/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-springmvc-å…¶ä»–" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/25/springmvc-å…¶ä»–/">springmvc_å…¶ä»–</a>
    </h1>
  

        
        <a href="/2018/06/25/springmvc-å…¶ä»–/" class="archive-article-date">
  	<time datetime="2018-06-25T11:51:25.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-06-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å¦‚æœä¸è®¾ç½®handlermappingï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ˜¯ä»€ä¹ˆ"><a href="#å¦‚æœä¸è®¾ç½®handlermappingï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ˜¯ä»€ä¹ˆ" class="headerlink" title="å¦‚æœä¸è®¾ç½®handlermappingï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ˜¯ä»€ä¹ˆ"></a>å¦‚æœä¸è®¾ç½®handlermappingï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ˜¯ä»€ä¹ˆ</h2><p>spring mvcæœ‰ä¸€äº›infrastructure beansï¼š</p>
<ul>
<li>HandlerMapping</li>
<li>HandlerAdapter</li>
<li>HandlerExceptionResolver</li>
<li>ViewResolver</li>
<li>LocalResolver  LocalContextResolver</li>
<li>ThemeResolver</li>
<li>MultipartResolver</li>
<li>FlashMapManager</li>
</ul>
<p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šè¿™äº›ç±»å‹çš„beanï¼Œé‚£ä¹ˆä¼šä½¿ç”¨é»˜è®¤çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">org.springframework.web.servlet.LocaleResolver=org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver</div><div class="line"></div><div class="line">org.springframework.web.servlet.ThemeResolver=org.springframework.web.servlet.theme.FixedThemeResolver</div><div class="line"></div><div class="line">org.springframework.web.servlet.HandlerMapping=org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,\</div><div class="line">	org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping</div><div class="line"></div><div class="line">org.springframework.web.servlet.HandlerAdapter=org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,\</div><div class="line">	org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,\</div><div class="line">	org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter</div><div class="line"></div><div class="line">org.springframework.web.servlet.HandlerExceptionResolver=org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver,\</div><div class="line">	org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver,\</div><div class="line">	org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver</div><div class="line"></div><div class="line">org.springframework.web.servlet.RequestToViewNameTranslator=org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator</div><div class="line"></div><div class="line">org.springframework.web.servlet.ViewResolver=org.springframework.web.servlet.view.InternalResourceViewResolver</div><div class="line"></div><div class="line">org.springframework.web.servlet.FlashMapManager=org.springframework.web.servlet.support.SessionFlashMapManager</div></pre></td></tr></table></figure>
<h2 id="æ³¨æ„å¯¹äº-ResponseBodyï¼ŒResponseEntityï¼ŒpostHandlerä¸èƒ½å¤„ç†response"><a href="#æ³¨æ„å¯¹äº-ResponseBodyï¼ŒResponseEntityï¼ŒpostHandlerä¸èƒ½å¤„ç†response" class="headerlink" title="æ³¨æ„å¯¹äº@ResponseBodyï¼ŒResponseEntityï¼ŒpostHandlerä¸èƒ½å¤„ç†response"></a>æ³¨æ„å¯¹äº@ResponseBodyï¼ŒResponseEntityï¼ŒpostHandlerä¸èƒ½å¤„ç†response</h2><p>å¯¹äº@ResponseBodyï¼ŒResponseEntityï¼Œresponseç›´æ¥åœ¨HandlerAdapterå°±å†™å›äº†ã€‚è¿™ä¸ªæ—¶å€™ä½ æƒ³å†æ”¹bodyæˆ–è€…headerå·²ç»å¤ªè¿Ÿäº†ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">spring java</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/06/25/springmvc-å…¶ä»–/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-springmvcè¯·æ±‚å¤„ç†æµç¨‹" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/25/springmvcè¯·æ±‚å¤„ç†æµç¨‹/">springmvcè¯·æ±‚å¤„ç†æµç¨‹</a>
    </h1>
  

        
        <a href="/2018/06/25/springmvcè¯·æ±‚å¤„ç†æµç¨‹/" class="archive-article-date">
  	<time datetime="2018-06-25T11:06:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-06-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä¸Šæ¬¡æ˜ç™½äº†springmvcçš„åˆå§‹åŒ–æµç¨‹ï¼Œç°åœ¨æ¥çœ‹çœ‹springmvcå¦‚ä½•å…·ä½“å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚</p>
<p>å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨åï¼Œä¼šäº¤ç»™servletï¼Œå¦‚æœæ˜¯äº¤ç»™äº†DispatchServletï¼Œé‚£ä¹ˆå°±ä¼šè°ƒåˆ°</p>
<p>##doServiceæ–¹æ³•</p>
<p>è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯å¾€requesté‡Œè®¾ç½®ä¸€äº›å±æ€§ã€‚æ–¹ä¾¿ä¹‹åhandlerå’Œviewè·å–ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Make framework objects available to handlers and view objects.</span></div><div class="line">request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());</div><div class="line">request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class="keyword">this</span>.localeResolver);</div><div class="line">request.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class="keyword">this</span>.themeResolver);</div><div class="line">request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());</div><div class="line"></div><div class="line">FlashMap inputFlashMap = <span class="keyword">this</span>.flashMapManager.retrieveAndUpdate(request, response);</div><div class="line"><span class="keyword">if</span> (inputFlashMap != <span class="keyword">null</span>) &#123;</div><div class="line">    request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));</div><div class="line">&#125;</div><div class="line">request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class="keyword">new</span> FlashMap());</div><div class="line">request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class="keyword">this</span>.flashMapManager);</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">//å±æ€§è®¾ç½®å®Œåå°†requestå’Œresponseäº¤ç»™doDispatch</span></div><div class="line">    doDispatch(request, response);</div><div class="line">&#125;</div><div class="line"><span class="keyword">finally</span> &#123;</div></pre></td></tr></table></figure>
<h2 id="doDispatchæ–¹æ³•"><a href="#doDispatchæ–¹æ³•" class="headerlink" title="doDispatchæ–¹æ³•"></a>doDispatchæ–¹æ³•</h2><p>è¿™é‡ŒåŒ…å«äº†å®Œæ•´çš„å¯¹è¿™ä¸ªè¯·æ±‚çš„å¤„ç†ã€‚</p>
<h4 id="æ‰¾åˆ°è¿™ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„handler"><a href="#æ‰¾åˆ°è¿™ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„handler" class="headerlink" title="æ‰¾åˆ°è¿™ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„handler"></a>æ‰¾åˆ°è¿™ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„handler</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">HttpServletRequest processedRequest = request;</div><div class="line">HandlerExecutionChain mappedHandler = <span class="keyword">null</span>;</div><div class="line"><span class="keyword">boolean</span> multipartRequestParsed = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</div><div class="line"></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    ModelAndView mv = <span class="keyword">null</span>;</div><div class="line">    Exception dispatchException = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        processedRequest = checkMultipart(request);</div><div class="line">        multipartRequestParsed = (processedRequest != request);</div><div class="line"></div><div class="line">        <span class="comment">//é€šè¿‡getHandlerå†³å®šç”¨å“ªä¸ªhandlerï¼Œå¹¶è¿”å›ä¸€ä¸ªHandlerExecutionChainå¯¹è±¡ã€‚</span></div><div class="line">        <span class="comment">//è¿™ä¸ªå¯¹è±¡ä¸ä»…åŒ…å«handlerï¼Œè¿˜æä¾›äº†prehandler,posthandler,completionHandleræ‹¦æˆªå™¨çš„æ–¹æ³•ã€‚</span></div><div class="line">        mappedHandler = getHandler(processedRequest);</div><div class="line">        <span class="keyword">if</span> (mappedHandler == <span class="keyword">null</span> || mappedHandler.getHandler() == <span class="keyword">null</span>) &#123;</div><div class="line">            noHandlerFound(processedRequest, response);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">///å¯ä»¥çœ‹åˆ°getHandlerï¼Œå®é™…ä¸Šå°±æ˜¯è½®è¯¢å“ªä¸ªHandlerMappingèƒ½å¤Ÿå¤„ç†è¿™ä¸ªrequest</span></div><div class="line"><span class="function"><span class="keyword">protected</span> HandlerExecutionChain <span class="title">getHandler</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="keyword">for</span> (HandlerMapping hm : <span class="keyword">this</span>.handlerMappings) &#123;</div><div class="line">        <span class="keyword">if</span> (logger.isTraceEnabled()) &#123;</div><div class="line">            logger.trace(</div><div class="line">                    <span class="string">"Testing handler map ["</span> + hm + <span class="string">"] in DispatcherServlet with name '"</span> + getServletName() + <span class="string">"'"</span>);</div><div class="line">        &#125;</div><div class="line">        HandlerExecutionChain handler = hm.getHandler(request);</div><div class="line">        <span class="keyword">if</span> (handler != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> handler;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">///é‚£this.handlerMappingæ˜¯æ€ä¹ˆåˆå§‹åŒ–çš„å‘¢ï¼Ÿå°±æ˜¯åœ¨æ‰€æœ‰çš„ApplicationContextï¼Œä¸­æ‰¾åˆ°å®ç°äº†HandlerMappingçš„beans.å¦‚æœæˆ‘ä»¬æ²¡ç‰¹åˆ«è®¾ç½®ï¼Œä¼šæœ‰ä¸€äº›é»˜è®¤çš„handlerMappingã€‚</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initHandlerMappings</span><span class="params">(ApplicationContext context)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>.handlerMappings = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.detectAllHandlerMappings) &#123;</div><div class="line">        <span class="comment">// åœ¨æ‰€æœ‰çš„ApplicationContextï¼Œä¸­æ‰¾åˆ°å®ç°äº†HandlerMappingçš„beans.</span></div><div class="line">        Map&lt;String, HandlerMapping&gt; matchingBeans =</div><div class="line">                BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerMapping.class, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line">        <span class="keyword">if</span> (!matchingBeans.isEmpty()) &#123;</div><div class="line">            <span class="keyword">this</span>.handlerMappings = <span class="keyword">new</span> ArrayList&lt;HandlerMapping&gt;(matchingBeans.values());</div><div class="line">            <span class="comment">// We keep HandlerMappings in sorted order.</span></div><div class="line">            AnnotationAwareOrderComparator.sort(<span class="keyword">this</span>.handlerMappings);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            HandlerMapping hm = context.getBean(HANDLER_MAPPING_BEAN_NAME, HandlerMapping.class);</div><div class="line">            <span class="keyword">this</span>.handlerMappings = Collections.singletonList(hm);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> (NoSuchBeanDefinitionException ex) &#123;</div><div class="line">            <span class="comment">// Ignore, we'll add a default HandlerMapping later.</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Ensure we have at least one HandlerMapping, by registering</span></div><div class="line">    <span class="comment">// a default HandlerMapping if no other mappings are found.</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.handlerMappings == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.handlerMappings = getDefaultStrategies(context, HandlerMapping.class);</div><div class="line">        <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</div><div class="line">            logger.debug(<span class="string">"No HandlerMappings found in servlet '"</span> + getServletName() + <span class="string">"': using default"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ok,é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“äº†handlerMappingæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®requestæ‰¾åˆ°å¯¹åº”çš„HandlerExecutionChainã€‚</p>
<h3 id="è¯¥æ‰§è¡Œhandleräº†"><a href="#è¯¥æ‰§è¡Œhandleräº†" class="headerlink" title="è¯¥æ‰§è¡Œhandleräº†"></a>è¯¥æ‰§è¡Œhandleräº†</h3><p>åœ¨æ‰§è¡Œå‰ï¼Œspringå°†handlerå°è£…ä¸ºä¸€ä¸ªHandlerAdapterã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿçœ‹çœ‹è¿™ä¸ªæ¥å£çš„å®šä¹‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">Interface that must be implemented for each handler type to handle a request.</div><div class="line"> * This interface is used to allow the &#123;<span class="doctag">@link</span> DispatcherServlet&#125; to be indefinitely</div><div class="line"> * extensible. The &#123;<span class="doctag">@code</span> DispatcherServlet&#125; accesses all installed handlers through</div><div class="line"> * this interface, meaning that it does not contain code specific to any handler type.</div><div class="line"> */</div><div class="line">å¤§æ¦‚æ˜¯è¯´ä¸ºäº†æ‰©å±•æ€§ï¼ŒDispatchServletä¸åº”è¯¥å’Œä»»ä½•å…·ä½“çš„handlerç›´æ¥æ‰“äº¤é“ï¼Œéƒ½é€šè¿‡HanlderAdapteræ¥è°ƒç”¨ã€‚</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨doDispatchä¸­çœ‹åˆ°äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Determine handler adapter for the current request.</span></div><div class="line"><span class="comment">//æŒ‘é€‰ä¸€ä¸ªHandlerAdapterï¼Œæ‰€æœ‰handlerçš„è°ƒç”¨éƒ½é€šè¿‡adapterã€‚</span></div><div class="line">HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());</div></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿˜æœ‰æ‹¦æˆªå™¨ï¼Œå¦‚æœè®¾ç½®äº†æ‹¦æˆªå™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å…ˆæ‰§è¡ŒpreHandlerï¼Œåœ¨æ‰§è¡Œhandlerï¼Œå†postHandlerï¼Œæœ€ååœ¨viewæ¸²æŸ“å®Œåæ‰§è¡Œcompletionhandlerã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å¦‚æœprehandlerè¿”å›falseï¼Œç›´æ¥ç»“æŸæ‰            </span></div><div class="line"><span class="keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// é€šè¿‡adapterè°ƒç”¨handlerã€‚</span></div><div class="line">mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</div><div class="line"></div><div class="line"><span class="keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">applyDefaultViewName(processedRequest, mv);</div><div class="line"><span class="comment">//æ‰§è¡Œposthandler</span></div><div class="line">mappedHandler.applyPostHandle(processedRequest, response, mv);</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">dispatchException = ex;</div><div class="line">&#125;</div><div class="line"><span class="comment">//å¤„ç†æ¸²æŸ“ï¼Œä¹‹åæ‰§è¡Œcompletionhandler</span></div><div class="line">processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">processDispatchResult</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span></div><div class="line">		HandlerExecutionChain mappedHandler, ModelAndView mv, Exception exception) <span class="keyword">throws</span> Exception &#123;</div><div class="line"></div><div class="line">	<span class="keyword">boolean</span> errorView = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (exception != <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">if</span> (exception <span class="keyword">instanceof</span> ModelAndViewDefiningException) &#123;</div><div class="line">			logger.debug(<span class="string">"ModelAndViewDefiningException encountered"</span>, exception);</div><div class="line">			mv = ((ModelAndViewDefiningException) exception).getModelAndView();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			Object handler = (mappedHandler != <span class="keyword">null</span> ? mappedHandler.getHandler() : <span class="keyword">null</span>);</div><div class="line">			mv = processHandlerException(request, response, handler, exception);</div><div class="line">			errorView = (mv != <span class="keyword">null</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Did the handler return a view to render?</span></div><div class="line">	<span class="keyword">if</span> (mv != <span class="keyword">null</span> &amp;&amp; !mv.wasCleared()) &#123;</div><div class="line">           <span class="comment">//åœ¨renderä¸­ä¼šå»æ ¹æ®viewnameåœ¨viewresolverä¸­æ‰¾åˆ°å¯¹åº”çš„viewè¿›è¡Œrenderã€‚</span></div><div class="line">		render(mv, request, response);</div><div class="line">		<span class="keyword">if</span> (errorView) &#123;</div><div class="line">			WebUtils.clearErrorRequestAttributes(request);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</div><div class="line">			logger.debug(<span class="string">"Null ModelAndView returned to DispatcherServlet with name '"</span> + getServletName() +</div><div class="line">					<span class="string">"': assuming HandlerAdapter completed request handling"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</div><div class="line">		<span class="comment">// Concurrent handling started during a forward</span></div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (mappedHandler != <span class="keyword">null</span>) &#123;</div><div class="line">           <span class="comment">//renderå®Œæˆäº†ï¼Œæ‰§è¡Œcompletionhanderã€‚</span></div><div class="line">		mappedHandler.triggerAfterCompletion(request, response, <span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">(ModelAndView mv, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">	<span class="comment">// Determine locale for request and apply it to the response.</span></div><div class="line">	Locale locale = <span class="keyword">this</span>.localeResolver.resolveLocale(request);</div><div class="line">	response.setLocale(locale);</div><div class="line"></div><div class="line">	View view;</div><div class="line">	<span class="keyword">if</span> (mv.isReference()) &#123;</div><div class="line">		<span class="comment">// æ ¹æ®viewnameæ‰¾åˆ°å¯¹åº”çš„view</span></div><div class="line">		view = resolveViewName(mv.getViewName(), mv.getModelInternal(), locale, request);</div><div class="line">		<span class="keyword">if</span> (view == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"Could not resolve view with name '"</span> + mv.getViewName() +</div><div class="line">					<span class="string">"' in servlet with name '"</span> + getServletName() + <span class="string">"'"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="comment">// No need to lookup: the ModelAndView object contains the actual View object.</span></div><div class="line">		view = mv.getView();</div><div class="line">		<span class="keyword">if</span> (view == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"ModelAndView ["</span> + mv + <span class="string">"] neither contains a view name nor a "</span> +</div><div class="line">					<span class="string">"View object in servlet with name '"</span> + getServletName() + <span class="string">"'"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Delegate to the View object for rendering.</span></div><div class="line">	<span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</div><div class="line">		logger.debug(<span class="string">"Rendering view ["</span> + view + <span class="string">"] in DispatcherServlet with name '"</span> + getServletName() + <span class="string">"'"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">           <span class="comment">//æ¸²æŸ“view</span></div><div class="line">		view.render(mv.getModelInternal(), request, response);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">		<span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</div><div class="line">			logger.debug(<span class="string">"Error rendering view ["</span> + view + <span class="string">"] in DispatcherServlet with name '"</span> +</div><div class="line">					getServletName() + <span class="string">"'"</span>, ex);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">throw</span> ex;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>okæ”¯æŒæ•´ä¸ªrequestçš„æµç¨‹å°±å¤„ç†å®Œäº†ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">spring java</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/06/25/springmvcè¯·æ±‚å¤„ç†æµç¨‹/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-SpringMVC-åˆå§‹åŒ–" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/22/SpringMVC-åˆå§‹åŒ–/">SpringMVC-åˆå§‹åŒ–</a>
    </h1>
  

        
        <a href="/2018/06/22/SpringMVC-åˆå§‹åŒ–/" class="archive-article-date">
  	<time datetime="2018-06-22T12:34:23.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-06-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>springMVCæ˜¯è®²springåº”ç”¨åˆ°webå¼€å‘ä¸­ã€‚å› æ­¤è¦æ˜ç™½springmvcæˆ‘ä»¬å¾—å…ˆçœ‹çœ‹springå’Œwebè¿™ä¸¤éƒ¨åˆ†ã€‚</p>
<h2 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h2><p>springæ˜¯ä¸€ä¸ªIoCå®¹å™¨ï¼Œå¸®åŠ©æˆ‘ä»¬å¤„ç†ç±»çš„ä¾èµ–ï¼Œwebå¼€å‘ä¸­åº”è¯¥ä¹Ÿæœ‰è®¸å¤šçš„ç±»ï¼Œä»–ä»¬çš„æ§åˆ¶ç”±springæ¥åè½¬ã€‚</p>
<h2 id="web"><a href="#web" class="headerlink" title="web"></a>web</h2><h4 id="webä¸­çš„servlet"><a href="#webä¸­çš„servlet" class="headerlink" title="webä¸­çš„servlet"></a>webä¸­çš„servlet</h4><p>å…ˆæ¥çœ‹çœ‹æœ€åŸå§‹çš„ï¼Œä¸ä½¿ç”¨ä»»ä½•æ¡†æ¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆå¤„ç†è¯·æ±‚çš„ã€‚javaçš„webå¼€å‘ï¼Œå®é™…ä¸Šæ˜¯å¤„ç†servletã€‚webæœåŠ¡å™¨æ¯”å¦‚Tomcatæ˜¯ä¸€ä¸ªservletå®¹å™¨ã€‚æˆ‘ä»¬å¹¶ä¸ç›´æ¥å’Œclientçš„requestæ‰“äº¤é“ã€‚clientçš„requestéƒ½å…ˆç”±servletå®¹å™¨å¤„ç†ï¼Œç„¶åç”Ÿæˆrequestå’Œresponseäº¤ç»™æˆ‘ä»¬å¤„ç†ï¼Œæˆ‘ä»¬ä»requestä¸­è§£ææ•°æ®ï¼Œå°†å¤„ç†çš„ç»“æœå†™å…¥responseä¸­ï¼Œè¿™å°±æ˜¯å¤§æ¦‚çš„æµç¨‹ï¼Œå¯ä»¥å‚ç…§ä¸‹é¢çš„å›¾ç‰‡ã€‚</p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-06-22-105517.png" alt="image-20180622185514719"></p>
<h4 id=""><a href="#" class="headerlink" title=""></a><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-06-22-105534.png" alt="image-20180622185532385"></h4><p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-06-22-105604.png" alt="image-20180622185601805"></p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-06-22-105632.png" alt="image-20180622185630290"></p>
<p><img src="/var/folders/49/n1n9hcx93zj_rh5nwm93bzkh0000gn/T/abnerworks.Typora/image-20180622185649046.png" alt="image-20180622185649046"></p>
<p><img src="http://xingou.oss-cn-shanghai.aliyuncs.com/2018-06-22-105659.png" alt="image-20180622185658445"></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></div><div class="line">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>home<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.gx.HomeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>home<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">        PrintWriter writer = resp.getWriter();</div><div class="line">        writer.print(<span class="string">"&lt;html&gt;  &lt;body&gt;  &lt;h1&gt; hello home &lt;/h1&gt; &lt;/body&gt;  &lt;/html&gt;"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªservletå«åšhomeï¼Œhomeç»‘å®šäº†url : /ã€‚å½“æˆ‘ä»¬è®¿é—®<a href="http://localhost:8080æ—¶ï¼Œservletå®¹å™¨å°±ä»web.xmlä¸­æ‰¾åˆ°è¿™ä¸ªæ˜ å°„ï¼Œå†æ‰¾åˆ°å¯¹åº”çš„servletäº¤ç»™HomeServletå¤„ç†ï¼ŒHomeServletå‘responseä¸­å†™å…¥ä¸€ä¸ªhtmlã€‚" target="_blank" rel="external">http://localhost:8080æ—¶ï¼Œservletå®¹å™¨å°±ä»web.xmlä¸­æ‰¾åˆ°è¿™ä¸ªæ˜ å°„ï¼Œå†æ‰¾åˆ°å¯¹åº”çš„servletäº¤ç»™HomeServletå¤„ç†ï¼ŒHomeServletå‘responseä¸­å†™å…¥ä¸€ä¸ªhtmlã€‚</a></p>
<h4 id="webä¸­çš„servletcontex"><a href="#webä¸­çš„servletcontex" class="headerlink" title="webä¸­çš„servletcontex"></a>webä¸­çš„servletcontex</h4><p>servletcontextæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¯ä¸ªwebåº”ç”¨éƒ½æœ‰ä¸€ä¸ªservletcontextå’Œ è‡³å°‘ä¸€ä¸ªservletã€‚servletcontexç”¨äºè®¿é—®webåº”ç”¨å‚æ•°ã€è®¿é—®æœåŠ¡å™¨ä¿¡æ¯ã€å…¨å±€å…±äº«ä¸€äº›ä¿¡æ¯ç­‰ã€‚æ¯”å¦‚ï¼šå¯èƒ½æ‰€æœ‰servletéƒ½ä¼šç”¨åˆ°çš„ä¸€äº›å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è®¾ç½®ä¸ºservletcontextçš„å±æ€§ã€‚</p>
<h2 id="å¦‚ä½•å°†springåº”ç”¨åˆ°webä¸Š"><a href="#å¦‚ä½•å°†springåº”ç”¨åˆ°webä¸Š" class="headerlink" title="å¦‚ä½•å°†springåº”ç”¨åˆ°webä¸Š"></a>å¦‚ä½•å°†springåº”ç”¨åˆ°webä¸Š</h2><p>springæ˜¯IoCå®¹å™¨ï¼Œå°†å„ç§ç±»çš„æ§åˆ¶åè½¬ã€‚è€Œwebå¼€å‘ä¸­çš„ç±»ï¼Œæˆ‘è§‰çš„å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ol>
<li>servletcontextç›¸å…³çš„ç”¨äºå…¨å±€çš„ä¸€äº›ç±»</li>
<li>servletç›¸å…³çš„ï¼Œåªå’Œè¿™ä¸ªservletç›¸å…³çš„ç±»</li>
</ol>
<p>å¥½äº†å†çœ‹çœ‹springmvcã€‚ä»–ä¸»è¦æœ‰ä¸¤ä¸ªWebApplicationContexã€‚ä»¥æˆ‘ç›®å‰çš„ç†è§£ï¼Œä»–ä»¬å…¶å®æ­£æ˜¯å’Œä¸Šé¢ä¸¤ä¸ªæ–¹é¢çš„ç±»å¯¹åº”ã€‚</p>
<p>æˆ‘ä»¬æœ‰ä¸€äº›å…¨å±€å…±äº«çš„ç±»ï¼Œæˆ‘ä»¬å°†ä»–ä»¬çš„æ§åˆ¶äº¤ç»™root applicationcontextæ¥ç®¡ç†ã€‚</p>
<p>å¦ä¸€äº›åªæœ‰å’Œservletç›¸å…³çš„ç±»:Controllerç­‰ï¼Œæˆ‘ä»¬å°†å…¶äº¤ç»™æŸä¸ªDispatchServletåˆ›å»ºçš„webapplicationcontextæ¥ç®¡ç†ã€‚</p>
<p>å†æ¥çœ‹çœ‹dispatchservletï¼Œä¸ºä»€ä¹ˆè¦æœ‰ä»–å‘¢ï¼Œç›®å‰æˆ‘çš„ç†è§£æ˜¯ä¸ºäº†ç®€åŒ–webå¼€å‘ï¼Œå› ä¸ºæŒ‰ç…§æœ€åŸå§‹çš„æ–¹å¼å¼€å‘ï¼Œæˆ‘ä»¬æ¯å¢åŠ ä¸€ä¸ªæ¥å£å°±æ·»åŠ ä¸€ä¸ªservletï¼Œè¿™æ ·å°±éœ€è¦é¢‘ç¹çš„é…ç½®web.xmlã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ›å»ºä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨DispatchServlet,ä»–ç»Ÿä¸€æ¥æ”¶ç„¶ååˆ†å‘ç»™controllerã€‚è€Œæ³¨è§£çš„æ–¹å¼æ¥æ˜ å°„è¯·æ±‚å’Œcontrollerï¼Œæ›´ç®€å•ä¸€ç‚¹ã€‚</p>
<p>ok,å°†ä»–ä»¬ç»“åˆèµ·æ¥ï¼Œå°±æ˜¯åœ¨é€‚å½“çš„æ—¶æœºåˆ›å»ºé€‚å½“çš„WebApplicationContexï¼Œåœ¨ç”¨ApplicationContextæ¥ç®¡ç†Beansã€‚è¿™æ ·å°±å°†springåº”ç”¨åˆ°äº†webå¼€å‘ä¸­ã€‚</p>
<h2 id="é€‚å½“çš„æ—¶æœº"><a href="#é€‚å½“çš„æ—¶æœº" class="headerlink" title="é€‚å½“çš„æ—¶æœº"></a>é€‚å½“çš„æ—¶æœº</h2><p>é‚£åº”è¯¥ä»€ä¹ˆæ—¶å€™åˆ›å»ºWebApplicationContextå‘¢ï¼Ÿ</p>
<h3 id="RootApplicationContext"><a href="#RootApplicationContext" class="headerlink" title="RootApplicationContext"></a>RootApplicationContext</h3><p>RootApplicationContexæ˜¯ä¸€ä¸ªå¸¦æœ‰å…¬å…±è‰²å½©çš„IoCã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ç”Ÿæˆä¸€ä¸ªIoCï¼Œå°†ä»–æ”¾åˆ°å…¨å±€çš„servletcontextï¼Œé‚£ä¹ˆè¿™ä¸ªIoCä¸å°±å¯ä»¥å…¨å±€ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ä¹ˆã€‚</p>
<p>æ—¢ç„¶ä»–éœ€è¦ä¾èµ–å…¨å±€çš„servletcontextï¼Œé‚£ä¹ˆå°±å®¹æ˜“è”æƒ³åˆ°åº”è¯¥åœ¨å…¨å±€çš„servletcontextåˆå§‹åŒ–å®Œæˆåï¼Œå°±åˆ›å»ºè¿™ä¸ªIoCï¼Œç„¶åå†å°†ä»–ä½œä¸ºå±æ€§æ·»åŠ åˆ°servletcontextä¸­ã€‚</p>
<p>é‚£ä¹ˆæ€ä¹ˆç›‘å¬servletcontextåˆå§‹åŒ–å®Œæˆå‘¢ï¼Ÿå½“ç„¶æ˜¯åœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªlistenerï¼Œå¹¶æŒ‡å®šä¸€ä¸ªå®ç°äº†servletcontextlistenerçš„ç±»æ¥ç›‘å¬å•¦ã€‚springmvcä¹Ÿç¡®å®æ˜¯è¿™ä¹ˆåšçš„ï¼Œä»–æä¾›ä¸€ä¸ªContextLoaderListenerï¼Œè¿™ä¸ªç±»å®ç°äº†servletcontextlisteneræ¥å£ï¼Œå› æ­¤servletcontextåˆå§‹åŒ–å®Œæˆåä¼šé€šçŸ¥ContextLoaderListenerï¼ŒContextLoaderListenerä¼šåœ¨è¿™ä¸ªå›è°ƒä¸­å»åˆå§‹åŒ–Root WebApplicationContextï¼Œç„¶åä½œä¸ºå±æ€§æ·»åŠ åˆ°servletcontextä¸­ã€‚</p>
<p>æ˜ç™½äº†ä¸Šé¢çš„æµç¨‹ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›åˆ›å»ºä¸€ä¸ªRoot ApplicationContextæ¥ç®¡ç†ä¸€äº›å…¬ç”¨çš„Beansï¼Œé‚£ä¹ˆéœ€è¦åœ¨wen.xmlä¸­é…ç½®ä¸€ä¸ªListener:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></div><div class="line">            org.springframework.web.context.ContextLoaderListener</div><div class="line">    <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¸è¿‡åªé…ç½®è¿™ä¸ªè¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šè¿™ä¸ªIoCéœ€è¦ç®¡ç†çš„Beansã€‚é»˜è®¤springmvcæ˜¯åˆ›å»ºä¸€ä¸ªxmlWebApplicationContextï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªxmlçš„è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„é»˜è®¤æ˜¯ï¼šWEB-INF/application.xmlã€‚ä¸è¿‡ä½ å¯ä»¥åœ¨web.xmlä¸­æ”¹å˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>WEB-INF/application.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure>
<p>åˆ›å»ºWebApplicationçš„å‚æ•°è¿˜æœ‰å‡ ä¸ªï¼Œä¸‹é¢ä»‹ç»ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">    é»˜è®¤æ˜¯xmlWebApplicationContext,ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡contextClassæ¥æ”¹å˜ï¼Œæ¯”å¦‚ä¸‹é¢æŒ‡å®šä¸ºAnnotationConfigWebApplicationContextï¼Œç”±äºä»–éœ€è¦ä¸€ä¸ªConfig classï¼Œæ‰€ä»¥æˆ‘ä»¬çš„contextConfigLocationå°±ä¸å†æ˜¯æŒ‡å®šxmlè€Œæ˜¯æŒ‡å®šæŸä¸ªç±»ã€‚</div><div class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextClass<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span></div><div class="line">        org.springframework.web.context.support.AnnotationConfigWebApplicationContext</div><div class="line">    <span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">    åœ¨WebApplicationContextç”Ÿæˆå‰ï¼Œè¿˜å…è®¸æˆ‘ä»¬å¯¹ä»–è¿›è¡Œäº›è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªå®ç°äº†ApplicationContextInitializeræ¥å£çš„ç±»æ¥åšäº›é¢å¤–çš„åˆå§‹åŒ–ã€‚</div><div class="line">     <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextInitializerClasses<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœæˆ‘å¹¶æ²¡æœ‰å…¨å±€å…¬å…±çš„ç±»ï¼Œå› æ­¤ä¹Ÿä¸éœ€è¦ä¸€ä¸ªRoot IoCï¼Œå¯ä»¥ä¹ˆï¼Ÿæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç”Ÿæˆä»–ï¼Œæ–¹æ³•ä¹Ÿå°±æ˜¯ä¸é…ç½®listenerã€‚</p>
<h3 id="WebApplocationContext"><a href="#WebApplocationContext" class="headerlink" title="WebApplocationContext"></a>WebApplocationContext</h3><p>è¿™ä¸ªæ—¢ç„¶æè¿°çš„æ˜¯ç®¡ç†æŸä¸ªServletçš„Beançš„IoCï¼Œé‚£ä¹ˆä»–çš„åˆ›å»ºæ—¶æœºä¹Ÿå°±æ˜¯è¿™ä¸ªservletåˆå§‹åŒ–çš„æ—¶å€™ã€‚springmvcæä¾›äº†DispatchServletæ¥ä½œä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªIoCã€‚</p>
<p>DispatchServletâ€“&gt;FrameworkServletâ€“&gt;HttpServletBeanâ€“&gt;HttpServletã€‚è¿™æ˜¯ç»§æ‰¿å…³ç³»ã€‚</p>
<p>HttpServletBeanè´Ÿè´£å°†åˆå§‹åŒ–å‚æ•°è®¾ç½®åˆ°è¯¥ç»„ä»¶ä¸Š(contextClass,contextConfigLocationç­‰)ã€‚å¹¶æä¾›ä¸€ä¸ªinitServletBeanäº¤ç»™å­ç±»å®ç°ã€‚</p>
<p>FramworkServleté‡å†™äº†è¿™ä¸ªæ–¹æ³•ã€‚é€šè¿‡contextclassæ‰¾åˆ°å¯¹åº”çš„classåˆå§‹åŒ–ã€‚ç„¶åconfigä»–ã€‚ç„¶åå¦‚æœæä¾›äº†contextInitializerClassesï¼Œé‚£ä¹ˆè°ƒç”¨initializeræ–¹æ³•ã€‚æä¾›onRefreshæ–¹æ³•ä¾›é‡è½½ã€‚</p>
<p>DispatchServleté‡å†™äº†onRefreshï¼Œå®ç°äº†å¯¹DispatchServletçš„åˆå§‹åŒ–:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">initMultipartResolver(context);  </div><div class="line"></div><div class="line">initLocaleResolver(context);   </div><div class="line"></div><div class="line">initThemeResolver(context);   </div><div class="line"></div><div class="line">initHandlerMappings(context);   </div><div class="line"></div><div class="line">initHandlerAdapters(context);   </div><div class="line"></div><div class="line">initHandlerExceptionResolvers(context);   </div><div class="line"></div><div class="line">initRequestToViewNameTranslator(context);   </div><div class="line"></div><div class="line">initViewResolvers(context);   </div><div class="line"></div><div class="line">initFlashMapManager(context);</div></pre></td></tr></table></figure>
<h2 id="é€šè¿‡WebApplicationInitializerä»£æ›¿web-xml"><a href="#é€šè¿‡WebApplicationInitializerä»£æ›¿web-xml" class="headerlink" title="é€šè¿‡WebApplicationInitializerä»£æ›¿web.xml"></a>é€šè¿‡WebApplicationInitializerä»£æ›¿web.xml</h2><p>Servlet3.0+ä¹‹åå¯ä»¥é€šè¿‡ä»£ç æ¥é…ç½®ã€‚ä¸»è¦æ˜¯å› ä¸ºservletå®¹å™¨ä¼šæŸ¥æ‰¾å®ç°äº†ServletContainerInitailizeræ¥å£çš„ç±»ï¼Œå¦‚æœèƒ½å‘ç°çš„è¯å°±ä¼šç”¨å®ƒæ¥é…ç½®å®¹å™¨ã€‚SpringMvcä¸ºè¿™ä¸ªæ¥å£æä¾›äº†å®ç°ç±»ï¼šSpringServletContainerInitializer.è¿™ä¸ªç±»åˆä¼šå»æ‰¾å®ç°äº†WebApplicationInitializerçš„ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.web.WebApplicationInitializer;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebApplicationInitializer</span> <span class="keyword">implements</span> <span class="title">WebApplicationInitializer</span> </span>&#123;</div><div class="line">	<span class="comment">//æ²¡æœ‰åˆ›å»ºroot ApplicaitonContext</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartup</span><span class="params">(ServletContext container)</span> </span>&#123;</div><div class="line">        XmlWebApplicationContext appContext = <span class="keyword">new</span> XmlWebApplicationContext();</div><div class="line">        appContext.setConfigLocation(<span class="string">"/WEB-INF/spring/dispatcher-config.xml"</span>);</div><div class="line"></div><div class="line">        ServletRegistration.Dynamic registration = container.addServlet(<span class="string">"dispatcher"</span>, <span class="keyword">new</span> DispatcherServlet(appContext));</div><div class="line">        registration.setLoadOnStartup(<span class="number">1</span>);</div><div class="line">        registration.addMapping(<span class="string">"/"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶spring ä¹Ÿæä¾›äº†ä¸€äº›å®ç°ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ç”¨å®ƒæ¥æä¾›RootConfig.classå’ŒAppConfig.class</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebAppInitializer</span> <span class="keyword">extends</span> </span></div><div class="line">    <span class="title">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Class&lt;?&gt;[] &#123; MyWebConfig.class &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[] &#123; <span class="string">"/"</span> &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ›´å–œæ¬¢xml,å¯ä»¥å‚ç…§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebAppInitializer</span> <span class="keyword">extends</span> <span class="title">AbstractDispatcherServletInitializer</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createRootApplicationContext</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createServletApplicationContext</span><span class="params">()</span> </span>&#123;</div><div class="line">        XmlWebApplicationContext cxt = <span class="keyword">new</span> XmlWebApplicationContext();</div><div class="line">        cxt.setConfigLocation(<span class="string">"/WEB-INF/spring/dispatcher-config.xml"</span>);</div><div class="line">        <span class="keyword">return</span> cxt;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[] &#123; <span class="string">"/"</span> &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">springmvc</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/06/22/SpringMVC-åˆå§‹åŒ–/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-UIImagePickerControllerå’ŒActionSheetåœ¨ipadä¸Šçš„é—®é¢˜" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/UIImagePickerControllerå’ŒActionSheetåœ¨ipadä¸Šçš„é—®é¢˜/">UIImagePickerControllerå’ŒActionSheetåœ¨ipadä¸Šçš„é—®é¢˜.md</a>
    </h1>
  

        
        <a href="/2018/05/24/UIImagePickerControllerå’ŒActionSheetåœ¨ipadä¸Šçš„é—®é¢˜/" class="archive-article-date">
  	<time datetime="2018-05-24T02:05:51.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-05-24</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>UIImagePickerControlleråœ¨ipadå’Œiphoneä¸Šä½¿ç”¨æœ‰äº›ä¸åŒã€‚</p>
<p>ipadä¸Šï¼š</p>
<p>sourceä¸ºcameraï¼šå¯ä»¥ç”¨popoveræˆ–è€…FullScreenã€‚</p>
<p>å…¶ä»–å¿…é¡»ä¸ºpopoverï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>UIAlertControllerä¸ºActionSheetæ—¶ï¼Œåœ¨ipadä¸Šå¿…é¡»ç”¨popoverã€‚</p>
<p>é€‚é…ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">UIImagePickerController *pic = [[UIImagePickerController alloc] init];</div><div class="line">pic.sourceType = UIImagePickerControllerSourceTypeCamera;</div><div class="line">pic.modalPresentationStyle = UIModalPresentationPopover;</div><div class="line">pic.delegate = weakSelf;</div><div class="line">UIPopoverPresentationController *popover = pic.popoverPresentationController;</div><div class="line">if (popover) &#123;</div><div class="line">    popover.sourceView = v;</div><div class="line">    popover.sourceRect = v.bounds;</div><div class="line">    popover.permittedArrowDirections = UIPopoverArrowDirectionAny;</div><div class="line">&#125;</div><div class="line">[weakSelf presentViewController:pic animated:YES completion:nil];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">UIPopoverPresentationController *popover = alertController.popoverPresentationController;</div><div class="line">if (popover) &#123;</div><div class="line">    popover.sourceView = v;</div><div class="line">    popover.sourceRect = v.bounds;</div><div class="line">    popover.permittedArrowDirections = UIPopoverArrowDirectionAny;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">iOS</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/05/24/UIImagePickerControllerå’ŒActionSheetåœ¨ipadä¸Šçš„é—®é¢˜/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 gouxin
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(194),t.exports=r(190)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(202);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="â€‹Â…",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r Â áš€á â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(381)),d=e(p),y=r(128),g=e(y),b=r(189),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(380),r(390),r(197),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(209),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(201);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(207),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(208)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":""
;return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(203))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(205),g=r(204),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){
return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(206),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(329),r(268),r(270),r(269),r(272),r(274),r(279),r(273),r(271),r(281),r(280),r(276),r(277),r(275),r(267),r(278),r(282),r(283),r(235),r(237),r(236),r(285),r(284),r(255),r(265),r(266),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(316),r(321),r(328),r(319),r(311),r(312),r(317),r(322),r(324),r(307),r(308),r(309),r(310),r(313),r(314),r(315),r(318),r(320),r(323),r(325),r(326),r(327),r(230),r(232),r(231),r(234),r(233),r(219),r(217),r(223),r(220),r(226),r(228),r(216),r(222),r(213),r(227),r(211),r(225),r(224),r(218),r(221),r(210),r(212),r(215),r(214),r(229),r(155),r(301),r(306),r(184),r(302),r(303),r(304),r(305),r(286),r(183),r(185),r(186),r(341),r(330),r(331),r(336),r(339),r(340),r(334),r(337),r(335),r(338),r(332),r(333),r(287),r(288),r(289),r(290),r(291),r(294),r(292),r(293),r(295),r(296),r(297),r(298),r(300),r(299),r(342),r(368),r(371),r(370),r(372),r(373),r(369),r(374),r(375),r(353),r(356),r(352),r(350),r(351),r(354),r(355),r(345),r(367),r(376),r(344),r(346),r(348),r(347),r(349),r(358),r(359),r(361),r(360),r(363),r(362),r(364),r(365),r(366),r(343),r(357),r(379),r(378),r(377),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.b3331d.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.445162.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">æ‰€æœ‰æ–‡ç« </a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">å‹é“¾</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">å…³äºæˆ‘</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">iOS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">android</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">é—²èŠ</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ios wkwebview</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">iosé—®é¢˜</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">rxswift,rxcocoa</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">rxswift</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">shell</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">spring java</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">swift</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">ffmpeg</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">appstore</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">springmvc</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">springmvc java</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br/>1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yiliaæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/> npm i hexo-generator-json-content --save<br/><br/>
            3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">å¾ˆæƒ­æ„§&lt;br&gt;&lt;br&gt;åªåšäº†ä¸€ç‚¹å¾®å°çš„å·¥ä½œ&lt;br&gt;è°¢è°¢å¤§å®¶</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>